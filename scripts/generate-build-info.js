import { writeFileSync } from 'fs';
import { execSync } from 'child_process';

const getGitCommitHash = () => {
  try {
    return execSync('git rev-parse --short HEAD').toString().trim();
  } catch (e) {
    return 'unknown';
  }
};

const buildInfo = {
  buildTime: new Date().toISOString(),
  commitHash: getGitCommitHash(),
  version: process.env.npm_package_version || '1.0.0',
};

const content = `// This file is auto-generated by scripts/generate-build-info.js
export const BUILD_INFO = ${JSON.stringify(buildInfo, null, 2)};`;

writeFileSync('./src/lib/build-info.ts', content, 'utf-8');
console.log('âœ… Generated build info:', buildInfo);
