import{R as i,m as ke,r as T,a as we,i as Ce,u as Te,L as Ee,b as _e,c as Ie,o as Oe,d as Le,e as Re,f as Ue,g as Ae,h as $e,j as pe,k as r}from"./index-CMWktKXy.js";const Be=e=>t=>{try{return i.Children.only(e)}catch{throw new Error(ke(t))}},Me=(e,t)=>(e||(e=t),typeof e=="string"&&(e=i.createElement("button",null,e)),e),Ge=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)},q=e=>{const t=Array(e.length).fill(null),[a,s]=T.useState(t);return e.map((n,o)=>({id:n.id,mount:l=>s(u=>u.map((m,x)=>x===o?l:m)),unmount:()=>s(l=>l.map((u,m)=>m===o?null:u)),portal:()=>i.createElement(i.Fragment,null,a[o]?we.createPortal(n.component,a[o]):null)}))};var E=e=>{Ce()&&console.error(e)};const v=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const a=s=>{const n=Te();return n.loaded?i.createElement(Ee,null,i.createElement(e,{...s,clerk:n})):null};return a.displayName=`withClerk(${t})`,a},R=e=>"mount"in e,re=e=>"open"in e;class j extends i.PureComponent{constructor(){super(...arguments),this.portalRef=i.createRef()}componentDidUpdate(t){var a,s,n,o;!R(t)||!R(this.props)||(t.props.appearance!==this.props.props.appearance||((s=(a=t.props)==null?void 0:a.customPages)==null?void 0:s.length)!==((o=(n=this.props.props)==null?void 0:n.customPages)==null?void 0:o.length))&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&(R(this.props)&&this.props.mount(this.portalRef.current,this.props.props),re(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.portalRef.current&&(R(this.props)&&this.props.unmount(this.portalRef.current),re(this.props)&&this.props.close())}render(){var t,a;return i.createElement(i.Fragment,null,i.createElement("div",{ref:this.portalRef}),R(this.props)&&((a=(t=this.props)==null?void 0:t.customPagesPortals)==null?void 0:a.map((s,n)=>T.createElement(s,{key:n}))))}}v(({clerk:e,...t})=>i.createElement(j,{mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:t}),"SignIn");v(({clerk:e,...t})=>i.createElement(j,{mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:t}),"SignUp");function Z({children:e}){return E(_e),i.createElement(i.Fragment,null,e)}function X({children:e}){return E(Ie),i.createElement(i.Fragment,null,e)}const Fe=v(({clerk:e,...t})=>{const{customPages:a,customPagesPortals:s}=me(t.children);return i.createElement(j,{mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:a},customPagesPortals:s})},"UserProfile");Object.assign(Fe,{Page:Z,Link:X});const He=v(({clerk:e,...t})=>{const{customPages:a,customPagesPortals:s}=me(t.children),n=Object.assign(t.userProfileProps||{},{customPages:a});return i.createElement(j,{mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...t,userProfileProps:n},customPagesPortals:s})},"UserButton"),ze=Object.assign(He,{UserProfilePage:Z,UserProfileLink:X});function J({children:e}){return E(Le),i.createElement(i.Fragment,null,e)}function ee({children:e}){return E(Oe),i.createElement(i.Fragment,null,e)}const De=v(({clerk:e,...t})=>{const{customPages:a,customPagesPortals:s}=he(t.children);return i.createElement(j,{mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...t,customPages:a},customPagesPortals:s})},"OrganizationProfile");Object.assign(De,{Page:J,Link:ee});v(({clerk:e,...t})=>i.createElement(j,{mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:t}),"CreateOrganization");const qe=v(({clerk:e,...t})=>{const{customPages:a,customPagesPortals:s}=he(t.children),n=Object.assign(t.organizationProfileProps||{},{customPages:a});return i.createElement(j,{mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...t,organizationProfileProps:n},customPagesPortals:s})},"OrganizationSwitcher");Object.assign(qe,{OrganizationProfilePage:J,OrganizationProfileLink:ee});v(({clerk:e,...t})=>i.createElement(j,{mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:t}),"OrganizationList");v(({clerk:e,...t})=>i.createElement(j,{open:e.openGoogleOneTap,close:e.closeGoogleOneTap,props:t}),"GoogleOneTap");const B=(e,t)=>!!e&&i.isValidElement(e)&&(e==null?void 0:e.type)===t,me=e=>fe({children:e,reorderItemsLabels:["account","security"],LinkComponent:X,PageComponent:Z,componentName:"UserProfile"}),he=e=>fe({children:e,reorderItemsLabels:["members","settings"],LinkComponent:ee,PageComponent:J,componentName:"OrganizationProfile"}),fe=({children:e,LinkComponent:t,PageComponent:a,reorderItemsLabels:s,componentName:n})=>{const o=[];i.Children.forEach(e,p=>{if(!B(p,a)&&!B(p,t)){p&&E(Re(n));return}const{props:y}=p,{children:N,label:b,url:P,labelIcon:k}=y;if(B(p,a))if(ae(y,s))o.push({label:b});else if(Y(y))o.push({label:b,labelIcon:k,children:N,url:P});else{E(Ue(n));return}if(B(p,t))if(Q(y))o.push({label:b,labelIcon:k,url:P});else{E(Ae(n));return}});const l=[],u=[],m=[];o.forEach((p,y)=>{if(Y(p)){l.push({component:p.children,id:y}),u.push({component:p.labelIcon,id:y});return}Q(p)&&m.push({component:p.labelIcon,id:y})});const x=q(l),d=q(u),f=q(m),g=[],C=[];return o.forEach((p,y)=>{if(ae(p,s)){g.push({label:p.label});return}if(Y(p)){const{portal:N,mount:b,unmount:P}=x.find(L=>L.id===y),{portal:k,mount:O,unmount:D}=d.find(L=>L.id===y);g.push({label:p.label,url:p.url,mount:b,unmount:P,mountIcon:O,unmountIcon:D}),C.push(N),C.push(k);return}if(Q(p)){const{portal:N,mount:b,unmount:P}=f.find(k=>k.id===y);g.push({label:p.label,url:p.url,mountIcon:b,unmountIcon:P}),C.push(N);return}}),{customPages:g,customPagesPortals:C}},ae=(e,t)=>{const{children:a,label:s,url:n,labelIcon:o}=e;return!a&&!n&&!o&&t.some(l=>l===s)},Y=e=>{const{children:t,label:a,url:s,labelIcon:n}=e;return!!t&&!!s&&!!n&&!!a},Q=e=>{const{children:t,label:a,url:s,labelIcon:n}=e;return!t&&!!s&&!!n&&!!a};function te(){const e=$e();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const Ye=({children:e})=>{const{userId:t}=pe();return t?i.createElement(i.Fragment,null,e):null},Qe=({children:e})=>{const{userId:t}=pe();return t===null?i.createElement(i.Fragment,null,e):null};v(({clerk:e,...t})=>{const{client:a,session:s}=e,{__unstable__environment:n}=e,o=a.activeSessions&&a.activeSessions.length>0;return i.useEffect(()=>{if(s===null&&o&&n){const{afterSignOutOneUrl:l}=n.displayConfig;e.navigate(l)}else e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");v(({clerk:e,...t})=>(i.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");v(({clerk:e})=>(i.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");v(({clerk:e})=>(i.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");v(({clerk:e})=>(i.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");v(({clerk:e,...t})=>(i.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");const We=v(({clerk:e,children:t,...a})=>{const{afterSignInUrl:s,afterSignUpUrl:n,redirectUrl:o,mode:l,...u}=a;t=Me(t,"Sign in");const m=Be(t)("SignInButton"),x=()=>{const g={afterSignInUrl:s,afterSignUpUrl:n,redirectUrl:o};return l==="modal"?e.openSignIn(g):e.redirectToSignIn(g)},f={...u,onClick:async g=>(await Ge(m.props.onClick)(g),x())};return i.cloneElement(m,f)},"SignInButton"),Ke=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"],I={AB:{kind:"GST_ONLY",gst:.05},BC:{kind:"GST_PST",gst:.05,pst:.07},MB:{kind:"GST_PST",gst:.05,pst:.07},NB:{kind:"HST",gst:.05,hst:.15},NL:{kind:"HST",gst:.05,hst:.15},NS:{kind:"HST",gst:.05,hst:.15},NT:{kind:"GST_ONLY",gst:.05},NU:{kind:"GST_ONLY",gst:.05},ON:{kind:"HST",gst:.05,hst:.13},PE:{kind:"HST",gst:.05,hst:.15},QC:{kind:"GST_QST",gst:.05,qst:.09975},SK:{kind:"GST_PST",gst:.05,pst:.06},YT:{kind:"GST_ONLY",gst:.05}},ge=["Standard","Exempt","Zero-rated (basic groceries)","Prepared food / restaurant","Children's clothing & footwear","Children's diapers","Children's car seats & booster seats","Feminine hygiene products","Prescription drugs / medical","Printed books (qualifying)","Newspapers (qualifying)","Public transit fares","Snack foods / candy","Sweetened carbonated beverages","Cannabis (medical)","Cannabis (non-medical)","Tobacco / alcohol","GST only","Provincial only"],W=["Prepared food / restaurant","Snack foods / candy","Sweetened carbonated beverages","Cannabis (non-medical)","Tobacco / alcohol"],Ve="BC";function Ze(e){switch(e){case"HST":return"HST";case"GST_QST":return"QST";case"GST_PST":return"PST";default:return"Provincial"}}function Xe(e){const t=I[e];return t.kind==="HST"?t.hst??0:t.kind==="GST_PST"?t.pst??0:t.kind==="GST_QST"?t.qst??0:0}function Je(e){switch(e){case"Exempt":case"Zero-rated (basic groceries)":case"Feminine hygiene products":case"Public transit fares":case"Prescription drugs / medical":return{federal:!1,provincial:!1};case"Printed books (qualifying)":case"Newspapers (qualifying)":return{federal:!0,provincial:!0};case"GST only":return{federal:!0,provincial:!1};case"Provincial only":return{federal:!1,provincial:!0};default:return{federal:!0,provincial:!0}}}function et(e,t,a,s){let{federal:n,provincial:o}=s;switch(a){case"Children's clothing & footwear":{["ON","NS","PE"].includes(t)&&(o=!1),t==="BC"&&(o=!1),t==="MB"&&(o=!(e<=150));break}case"Children's diapers":{["ON","NS"].includes(t)&&(o=!1),["BC","MB","SK","QC"].includes(t)&&(o=!1);break}case"Children's car seats & booster seats":{["ON","BC","MB"].includes(t)&&(o=!1);break}case"Prepared food / restaurant":{t==="ON"&&e<=4&&(o=!1),t==="BC"&&(o=!1),["MB","SK"].includes(t)&&(o=!0);break}case"Sweetened carbonated beverages":{["BC","MB","SK"].includes(t)&&(o=!0);break}case"Snack foods / candy":{t==="BC"&&(o=!1),["MB","SK"].includes(t)&&(o=!0);break}case"Printed books (qualifying)":{["ON","NS","NB","NL","PE"].includes(t)&&(o=!1),["BC","MB","SK","QC"].includes(t)&&(o=!1);break}case"Newspapers (qualifying)":{["ON","BC"].includes(t)&&(o=!1);break}}return{federal:n,provincial:o}}function tt(e,t){const a=Number.isFinite(e.amount)?Math.max(e.amount,0):0,s=Je(e.category),{federal:n,provincial:o}=et(a,t,e.category,s),l=I[t];let u=0,m=0,x=0;l.kind==="HST"?n&&o?x=a*(l.hst??0):n&&!o?u=a*l.gst:!n&&o&&(m=a*((l.hst??0)-l.gst)):l.kind==="GST_PST"?(n&&(u=a*l.gst),o&&(m=a*(l.pst??0))):l.kind==="GST_QST"?(n&&(u=a*l.gst),o&&(m=a*(l.qst??0))):n&&(u=a*l.gst);const d=u+m+x;return{amount:a,federalTax:u,provincialTax:m,hstTax:x,totalTax:d,grandTotal:a+d}}function rt(e){return e.reduce((t,a)=>({subTotal:t.subTotal+a.amount,federal:t.federal+a.federalTax,provincial:t.provincial+a.provincialTax,hst:t.hst+a.hstTax,tax:t.tax+a.totalTax,grandTotal:t.grandTotal+a.grandTotal}),{subTotal:0,federal:0,provincial:0,hst:0,tax:0,grandTotal:0})}function at(e,t){const a=e.map(s=>tt(s,t));return{lines:a,totals:rt(a)}}function be(e){return ge.includes(e)?e:"Standard"}const V="state";function nt(e){return typeof btoa=="function"?btoa(e):e}function st(e){return typeof atob=="function"?atob(e):e}function ot(e){const t=JSON.stringify(e),a=encodeURIComponent(nt(t));return`${V}=${a}`}function it(e){if(!e.startsWith(`${V}=`))return null;const t=e.slice(V.length+1);try{const a=st(decodeURIComponent(t)),s=JSON.parse(a);if(!s||typeof s!="object")return null;const n=s.province,o=Array.isArray(s.items)?s.items:[];if(!n)return null;const l=o.map((u,m)=>({label:typeof(u==null?void 0:u.label)=="string"&&u.label.trim()?u.label:`Item ${m+1}`,category:be(u==null?void 0:u.category),amount:typeof(u==null?void 0:u.amount)=="string"||typeof(u==null?void 0:u.amount)=="number"?String(u.amount):"0"}));return{province:n,items:l}}catch(a){return console.warn("Failed to decode share state",a),null}}function lt(e){if(!e)return null;const a=e.replace(/^#/,"").split("&");for(const s of a){const n=it(s);if(n)return n}return null}const xe="tax-smart-theme";function z(){return typeof window<"u"&&typeof document<"u"}function ne(){if(!z())return null;const e=window.localStorage.getItem(xe);return e==="light"||e==="dark"?e:null}function se(e){if(!z())return;const t=document.documentElement;t.classList.toggle("dark",e==="dark"),t.setAttribute("data-theme",e),t.style.setProperty("color-scheme",e)}function ct(e="dark"){const[t,a]=i.useState(()=>{const n=ne()??e;return se(n),n});i.useEffect(()=>{se(t),z()&&window.localStorage.setItem(xe,t)},[t]),i.useEffect(()=>{if(!z())return;const n=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{a(u=>ne()??(l.matches?"dark":"light"))};return n.addEventListener("change",o),()=>n.removeEventListener("change",o)},[]);const s=i.useCallback(()=>{a(n=>n==="dark"?"light":"dark")},[]);return{theme:t,setTheme:a,toggleTheme:s}}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(e,t)=>{const a=T.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:u="",children:m,...x},d)=>T.createElement("svg",{ref:d,...ut,width:n,height:n,stroke:s,strokeWidth:l?Number(o)*24/Number(n):o,className:["lucide",`lucide-${dt(e)}`,u].join(" "),...x},[...t.map(([f,g])=>T.createElement(f,g)),...Array.isArray(m)?m:[m]]));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=$("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=$("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var ve="https://js.stripe.com/v3",gt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var bt=function(){for(var t=document.querySelectorAll('script[src^="'.concat(ve,'"]')),a=0;a<t.length;a++){var s=t[a];if(gt.test(s.src))return s}return null},oe=function(t){var a="",s=document.createElement("script");s.src="".concat(ve).concat(a);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(s),s},xt=function(t,a){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:a})},U=null,M=null,G=null,yt=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},vt=function(t,a){return function(){window.Stripe?t(window.Stripe):a(new Error("Stripe.js not available"))}},St=function(t){return U!==null?U:(U=new Promise(function(a,s){if(typeof window>"u"||typeof document>"u"){a(null);return}if(window.Stripe){a(window.Stripe);return}try{var n=bt();if(!(n&&t)){if(!n)n=oe(t);else if(n&&G!==null&&M!==null){var o;n.removeEventListener("load",G),n.removeEventListener("error",M),(o=n.parentNode)===null||o===void 0||o.removeChild(n),n=oe(t)}}G=vt(a,s),M=yt(s),n.addEventListener("load",G),n.addEventListener("error",M)}catch(l){s(l);return}}),U.catch(function(a){return U=null,Promise.reject(a)}))},jt=function(t,a,s){if(t===null)return null;var n=t.apply(void 0,a);return xt(n,s),n},A,Se=!1,je=function(){return A||(A=St(null).catch(function(t){return A=null,Promise.reject(t)}),A)};Promise.resolve().then(function(){return je()}).catch(function(e){Se||console.warn(e)});var Nt=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];Se=!0;var n=Date.now();return je().then(function(o){return jt(o,a,n)})};const ie=Nt(void 0);console.warn("Stripe publishable key is not set. Please add VITE_STRIPE_PUBLISHABLE_KEY to your .env file");const le={PRO_MONTHLY:"price_1S8LcGC8Z2peWf8UabP3FePl",PRO_YEARLY:"price_1S8LZbC8Z2peWf8Uk1yKWvyt"};async function Pt(e,t,a){if(!ie){console.error("Stripe failed to initialize");return}try{const n=await(await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e,userId:t,email:a,successUrl:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})})).json();if(n.error){console.error("Error creating checkout session:",n.error);return}const o=await ie;if(o){const{error:l}=await o.redirectToCheckout({sessionId:n.id});l&&console.error("Error redirecting to checkout:",l)}else console.error("Stripe failed to initialize")}catch(s){console.error("Error:",s)}}const kt="https://github.com/sponsors/Solution-Desk",ce={src:"https://github.com/sponsors/Solution-Desk/button",title:"Sponsor Solution-Desk",height:32,width:114},wt=[{key:"calculations",label:"Unlimited calculations",helper:"Run as many quotes as you need without throttling.",availability:{free:!0,pro:!0,supporter:!0}},{key:"shares",label:"Share link & copy results",helper:"Send colleagues a snapshot or paste totals into invoices.",availability:{free:!0,pro:!0,supporter:!0}},{key:"references",label:"CRA & provincial reference library",availability:{free:!0,pro:!0,supporter:!0}},{key:"presets",label:"Saved presets & projects",helper:"Organise favourite configurations per client.",availability:{free:!1,pro:!0,supporter:!0}},{key:"line-items",label:"Unlimited line items",availability:{free:!1,pro:!0,supporter:!0}},{key:"exports",label:"CSV & PDF export",availability:{free:!1,pro:!0,supporter:!0}},{key:"batch",label:"Batch import (CSV)",availability:{free:!1,pro:!0,supporter:!0}},{key:"currency",label:"Multi-currency display",availability:{free:!1,pro:!0,supporter:!0}},{key:"audit",label:"Audit notes (rule triggers)",availability:{free:!1,pro:!0,supporter:!0}},{key:"share-expiry",label:"Private share links (30 days)",availability:{free:!1,pro:!0,supporter:!0}},{key:"support",label:"Priority email support",availability:{free:!1,pro:!0,supporter:!0}},{key:"previews",label:"Early feature previews & release shout-out",availability:{free:!1,pro:!1,supporter:!0}}];function Ct({isOpen:e,onClose:t}){const{user:a}=te(),[s,n]=T.useState(!1);if(!e)return null;const o=!!a,l=async d=>{var f;if(a){n(!0);try{Pt(d,a.id,((f=a.primaryEmailAddress)==null?void 0:f.emailAddress)||"")}finally{n(!1)}}},u=[{id:"free",name:"Free",price:"$0",cadence:"/month",tagline:"Essentials stay free forever for quick, accurate quotes.",actions:[{type:"button",label:"Included with every account",onClick:()=>{},variant:"ghost",disabled:!0}]},{id:"pro",name:"Pro",badge:"Best value",icon:r.jsx(ye,{className:"h-5 w-5 text-amber-500","aria-hidden":!0}),price:"CA$19.99",cadence:"/year",tagline:"Unlock exports, unlimited presets, and batch tools — priced between free apps and suites.",highlight:!0,actions:[{type:"button",label:s?"Loading…":"Upgrade yearly — CA$19.99",onClick:()=>l(le.PRO_YEARLY),variant:"primary",disabled:s||!o},{type:"button",label:s?"Loading…":"Upgrade monthly — CA$3.49",onClick:()=>l(le.PRO_MONTHLY),variant:"secondary",disabled:s||!o}],footnote:o?void 0:"Sign in to continue checkout."},{id:"supporter",name:"Supporter",icon:r.jsx(mt,{className:"h-5 w-5 text-rose-500","aria-hidden":!0}),price:"CA$24.99",cadence:"/year",tagline:"Same features as Pro plus helps fund the free essentials.",actions:[{type:"link",label:"Sponsor on GitHub",href:kt,variant:"primary"}]}],m="w-full font-medium py-2 px-4 rounded-md transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-amber-400",x={primary:`${m} bg-amber-600 hover:bg-amber-700 text-white disabled:opacity-50`,secondary:`${m} border border-amber-500 text-amber-500 hover:bg-amber-500/10 disabled:opacity-50`,ghost:`${m} bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 cursor-default`};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Unlock TaxSmart Pro"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Close pricing dialog",children:r.jsx(ft,{className:"h-6 w-6"})})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3 text-sm md:text-base",children:"TaxSmart stays free for core quoting. Upgrading keeps the lights on and unlocks the extras teams ask for most."}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-xs md:text-sm",children:"Pro is CA$19.99/year (or CA$3.49/month). Supporter at CA$24.99/year has the same features and helps fund the free essentials. It positions us above simple freebies and below heavy business suites — with room for promos like “Founding year CA$14.99”."}),r.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:u.map(d=>r.jsxs("div",{className:`rounded-lg border p-6 ${d.highlight?"border-amber-500 bg-amber-50/10 dark:bg-amber-500/5":d.id==="supporter"?"border-rose-300 dark:border-rose-500 bg-rose-50/10 dark:bg-rose-500/5":"border-gray-200 dark:border-gray-700"}`,children:[d.badge&&r.jsx("div",{className:"flex justify-center",children:r.jsx("span",{className:"mb-4 inline-flex items-center gap-1 rounded-full bg-amber-500 px-3 py-1 text-xs font-medium text-white",children:d.badge})}),r.jsxs("div",{className:"text-center mb-6 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg font-semibold text-gray-900 dark:text-white",children:[d.icon,r.jsx("span",{children:d.name})]}),r.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[d.price,r.jsx("span",{className:"text-sm font-normal text-gray-500",children:d.cadence})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.tagline})]}),r.jsx("div",{className:"space-y-3",children:d.actions.map((f,g)=>f.type==="link"?r.jsx("a",{href:f.href,target:"_blank",rel:"noreferrer",className:`${x[f.variant]} inline-flex items-center justify-center`,children:f.label},f.label):r.jsx("button",{type:"button",onClick:f.onClick,disabled:f.disabled,className:`${x[f.variant]} inline-flex items-center justify-center`,children:f.label},f.label))}),d.id==="supporter"&&r.jsx("div",{className:"mt-4 flex justify-center",children:r.jsx("iframe",{className:"rounded sponsor-iframe",...ce,style:{border:0,borderRadius:"6px"}})}),d.footnote&&r.jsx("p",{className:"mt-3 text-xs text-center text-gray-500 dark:text-gray-400",children:d.footnote})]},d.id))}),r.jsxs("div",{className:"mt-10",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Feature comparison"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/40 text-gray-700 dark:text-gray-300",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 font-semibold",children:"Feature"}),u.map(d=>r.jsx("th",{className:"py-3 px-4 text-center font-semibold",children:d.name},d.id))]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:wt.map(d=>r.jsxs("tr",{className:"bg-white dark:bg-gray-800",children:[r.jsxs("td",{className:"py-3 px-4 align-top text-gray-700 dark:text-gray-200",children:[r.jsx("div",{children:d.label}),d.helper&&r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:d.helper})]}),u.map(f=>{const g=d.availability[f.id];return r.jsx("td",{className:"py-3 px-4 text-center",title:g?"Included":"Not included",children:g?r.jsx(pt,{className:"mx-auto h-5 w-5 text-emerald-500","aria-hidden":!0}):r.jsx(ht,{className:"mx-auto h-5 w-5 text-gray-400","aria-hidden":!0})},f.id)})]},d.key))})]})})]}),r.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400 space-y-2",children:[r.jsx("p",{children:"✓ Cancel anytime • ✓ 30-day money-back guarantee • ✓ Secure checkout"}),r.jsxs("p",{children:["Questions about pricing? Email"," ",r.jsx("a",{className:"underline",href:"mailto:taxapp@thesolutiondesk.ca",children:"taxapp@thesolutiondesk.ca"}),"."]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("iframe",{className:"rounded sponsor-iframe",...ce,style:{border:0,borderRadius:"6px"}})})]})]})})})}const Tt={plan:"free",maxLineItems:5,canExport:!1,canSaveCalculations:!1,canUsePrivateShares:!1,canCompareProvinces:!1,shareExpiryHours:24},Et={plan:"pro",maxLineItems:1/0,canExport:!0,canSaveCalculations:!0,canUsePrivateShares:!0,canCompareProvinces:!0,shareExpiryHours:24*30};function _t(e){return e==="pro"?Et:Tt}function It(){var a;const{user:e}=te(),t=T.useMemo(()=>{var n;return((n=e==null?void 0:e.publicMetadata)==null?void 0:n.plan)==="pro"?"pro":"free"},[(a=e==null?void 0:e.publicMetadata)==null?void 0:a.plan]);return _t(t)}function Ot(){const{user:e,isSignedIn:t}=te(),a=It();return{isSignedIn:t,plan:a.plan,isPro:a.plan==="pro",isFree:a.plan==="free",entitlements:a}}const Lt=new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}),F="taxapp@thesolutiondesk.ca",ue="https://github.com/sponsors/Solution-Desk",de={src:"https://github.com/sponsors/Solution-Desk/button",title:"Sponsor Solution-Desk",height:32,width:114};function H(e,t={}){return{id:crypto.randomUUID(),label:t.label??`Item ${e}`,category:t.category??"Standard",amount:t.amount??"0"}}function Rt(e){if(!e)return 0;const t=Number.parseFloat(e);return Number.isFinite(t)&&t>0?t:0}function S(e){return Lt.format(e)}async function K(e){var t;if(typeof navigator<"u"&&((t=navigator.clipboard)!=null&&t.writeText))try{return await navigator.clipboard.writeText(e),!0}catch(a){return console.warn("Clipboard write failed",a),!1}return!1}function Ut(e){return e.map(({label:t,category:a,amount:s})=>({label:t,category:a,amount:s}))}function $t(){const{theme:e,toggleTheme:t}=ct("dark"),[a,s]=i.useState(!1),[n,o]=i.useState(Ve),[l,u]=i.useState([H(1)]),[m,x]=i.useState(null),[d,f]=i.useState(0),{isPro:g}=Ot(),C=i.useMemo(()=>l.map(c=>({amount:Rt(c.amount),category:c.category})),[l]),{totals:p}=i.useMemo(()=>at(C,n),[C,n]),y=Ze(I[n].kind),N=Xe(n),b=i.useCallback(c=>{x(c),window.setTimeout(()=>x(null),1800)},[]),P=i.useCallback(()=>{u(c=>[...c,H(c.length+1)])},[]),k=i.useCallback(c=>{u(h=>h.length>1?h.filter(w=>w.id!==c):h)},[]),O=i.useCallback((c,h)=>{if(h.category&&!g&&W.includes(h.category)){b("Upgrade to Pro to use that category"),s(!0);return}u(w=>w.map(_=>_.id===c?{..._,...h}:_))},[g,b,s]),D=i.useCallback(()=>{f(c=>c+1),b("Totals refreshed")},[b]),L=i.useCallback(async()=>{const c=[`Province: ${n}`,`Subtotal: ${S(p.subTotal)}`,I[n].kind==="HST"?`HST: ${S(p.hst)}`:`GST: ${S(p.federal)}
${y}: ${S(p.provincial)}`,`Total tax: ${S(p.tax)}`,`Grand total: ${S(p.grandTotal)}`],h=await K(c.join(`
`));b(h?"Results copied to clipboard":"Clipboard not available")},[n,y,b,p]),Ne=i.useCallback(async()=>{if(typeof window>"u")return;const c=new URL(window.location.href);c.hash=ot({province:n,items:Ut(l)});const h=await K(c.toString());b(h?"Shareable link copied":"Clipboard not available")},[l,n,b]),Pe=i.useCallback(async()=>{if(await K(F)){b("Email copied to clipboard.");return}window.location.href=`mailto:${F}`},[b]);return i.useEffect(()=>{if(typeof window>"u")return;const c=lt(window.location.hash);c&&(o(c.province),u(c.items.length?c.items.map((h,w)=>H(w+1,{label:h.label,category:(()=>{const _=be(h.category);return!g&&W.includes(_)?"Standard":_})(),amount:h.amount})):[H(1)]))},[g]),r.jsxs("div",{className:"calculator-shell",children:[r.jsxs("header",{className:"calculator-header",children:[r.jsxs("div",{className:"calculator-brand",children:[r.jsx("span",{className:"calculator-logo","aria-hidden":!0,children:"CA"}),r.jsxs("div",{children:[r.jsx("p",{className:"brand-name",children:"TaxSmart"}),r.jsx("p",{className:"brand-tagline",children:"GST / HST / PST & QST in one view"})]})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:t,children:e==="dark"?"Light mode":"Dark mode"}),r.jsxs("button",{onClick:()=>s(!0),className:"btn whitespace-nowrap bg-gradient-to-r from-amber-400 to-amber-500 text-white border-transparent hover:from-amber-500 hover:to-amber-600 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5",children:[r.jsx(ye,{className:"h-3.5 w-3.5 inline-block mr-1.5"}),r.jsx("span",{children:"Upgrade"})]}),r.jsx(Qe,{children:r.jsx(We,{mode:"modal",children:r.jsx("button",{className:"btn whitespace-nowrap bg-indigo-600 text-white hover:bg-indigo-700 border-transparent",children:"Sign in"})})}),r.jsx(Ye,{children:r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ze,{afterSignOutUrl:"/"})})})]})]}),r.jsx(Ct,{isOpen:a,onClose:()=>s(!1)}),m&&r.jsx("div",{role:"status",className:"calculator-notice",children:m}),r.jsxs("main",{className:"calculator-main grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("section",{className:"panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx("h1",{className:"panel-title",children:"Canada sales-tax smart calculator"}),r.jsx("span",{className:"badge",children:"Free forever"})]}),r.jsx("p",{className:"panel-subtitle",children:"Estimate combined GST, HST, PST, and QST with per-province category rules."}),r.jsxs("div",{className:"province-grid",children:[r.jsxs("article",{className:"total-card form-field-card","aria-labelledby":"province-select-label",children:[r.jsx("label",{id:"province-select-label",className:"field-label",htmlFor:"province-select",children:"Province / Territory"}),r.jsx("select",{id:"province-select",className:"input select",value:n,onChange:c=>o(c.target.value),children:Ke.map(c=>r.jsx("option",{value:c,children:c},c))})]}),r.jsxs("div",{className:"rate-cards",children:[r.jsxs("div",{className:"rate-card",children:[r.jsx("p",{className:"muted",children:"Federal (GST)"}),r.jsxs("p",{className:"rate-value",children:[(I[n].gst*100).toFixed(1),"%"]})]}),r.jsxs("div",{className:"rate-card",children:[r.jsxs("p",{className:"muted",children:["Provincial (",y,")"]}),r.jsx("p",{className:"rate-value",children:N?`${(N*100).toFixed(2)}%`:"—"})]})]})]})]}),r.jsxs("section",{className:"panel",children:[r.jsx("div",{className:"panel-header",children:r.jsx("h2",{className:"panel-title",children:"Line items"})}),r.jsx("div",{className:"line-items",children:l.map(c=>r.jsxs("div",{className:"line-item",children:[r.jsx("label",{className:"sr-only",htmlFor:`label-${c.id}`,children:"Item label"}),r.jsx("input",{id:`label-${c.id}`,className:"input",value:c.label,onChange:h=>O(c.id,{label:h.target.value}),placeholder:"Item label"}),r.jsx("label",{className:"sr-only",htmlFor:`category-${c.id}`,children:"Item category"}),r.jsx("select",{id:`category-${c.id}`,className:"input",value:c.category,onChange:h=>O(c.id,{category:h.target.value}),children:ge.map(h=>{const w=W.includes(h);return r.jsxs("option",{value:h,disabled:!g&&w,children:[h,!g&&w?" (Pro)":""]},h)})}),r.jsx("label",{className:"sr-only",htmlFor:`amount-${c.id}`,children:"Item amount"}),r.jsxs("div",{className:"amount-field",children:[r.jsx("span",{"aria-hidden":!0,children:"$"}),r.jsx("input",{id:`amount-${c.id}`,className:"input",value:c.amount,onChange:h=>O(c.id,{amount:h.target.value}),inputMode:"decimal",type:"number",step:"0.01",min:"0",placeholder:"0.00"})]}),r.jsx("button",{type:"button",className:"btn icon","aria-label":"Remove line item",onClick:()=>k(c.id),disabled:l.length===1,children:"×"})]},c.id))}),r.jsxs("div",{className:"line-items-actions",children:[r.jsx("button",{type:"button",className:"btn ghost",onClick:P,children:"+ Add item"}),r.jsx("button",{type:"button",className:"btn primary",onClick:D,children:"Calculate tax"})]})]}),r.jsxs("section",{className:"panel",children:[r.jsxs("div",{className:"panel-header",children:[r.jsx("h2",{className:"panel-title",children:"Totals"}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:Ne,children:"Share app"}),r.jsx("button",{type:"button",className:"btn",onClick:L,children:"Copy results"})]})]}),r.jsxs("div",{className:"totals-grid",children:[r.jsxs("article",{className:"total-card",children:[r.jsx("p",{className:"muted",children:"Subtotal"}),r.jsx("p",{className:"total-value",children:S(p.subTotal)})]}),I[n].kind==="HST"?r.jsxs("article",{className:"total-card",children:[r.jsx("p",{className:"muted",children:"HST"}),r.jsx("p",{className:"total-value",children:S(p.hst)})]}):r.jsxs(r.Fragment,{children:[r.jsxs("article",{className:"total-card",children:[r.jsx("p",{className:"muted",children:"GST"}),r.jsx("p",{className:"total-value",children:S(p.federal)})]}),r.jsxs("article",{className:"total-card",children:[r.jsx("p",{className:"muted",children:y}),r.jsx("p",{className:"total-value",children:S(p.provincial)})]})]}),r.jsxs("article",{className:"total-card",children:[r.jsx("p",{className:"muted",children:"Total tax"}),r.jsx("p",{className:"total-value",children:S(p.tax)})]}),r.jsxs("article",{className:"total-card highlight",children:[r.jsx("p",{className:"muted",children:"Grand total"}),r.jsx("p",{className:"total-value",children:S(p.grandTotal)})]})]})]},d),r.jsxs("section",{className:"panel",children:[r.jsx("h2",{className:"panel-title",children:"References"}),r.jsxs("ul",{className:"reference-list",children:[r.jsx("li",{children:r.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/gst-hst-businesses/charge-collect-type-supply.html",target:"_blank",rel:"noreferrer",children:"CRA: Charge & collect GST/HST by type of supply"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-063.html",target:"_blank",rel:"noreferrer",children:"CRA GI-063: Ontario point-of-sale rebates (children's goods, books, diapers, car seats)"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-060.html",target:"_blank",rel:"noreferrer",children:"CRA GI-060: Ontario point-of-sale rebate on newspapers"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst",target:"_blank",rel:"noreferrer",children:"BC PST overview & exemptions"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst/ice-cream-sweetened-beverages",target:"_blank",rel:"noreferrer",children:"BC PST: Sweetened carbonated beverages"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www.gov.mb.ca/finance/taxation/taxes/retail.html",target:"_blank",rel:"noreferrer",children:"Manitoba RST exemptions (incl. children's clothing)"})}),r.jsx("li",{children:r.jsx("a",{href:"https://www.revenuquebec.ca/en/",target:"_blank",rel:"noreferrer",children:"Revenu Québec: QST exemptions (books, baby products)"})})]}),r.jsx("p",{className:"muted",children:"Excise duties or deposits on alcohol, tobacco, cannabis, and containers are not included."})]}),r.jsxs("section",{className:"panel",children:[r.jsx("h2",{className:"panel-title",children:"Need help or have ideas?"}),r.jsx("p",{children:"Spot a rate mismatch, want a new workflow shortcut, or need a second set of eyes on your quote? Reach us at the address below and we’ll get back within one business day."}),r.jsxs("div",{className:"contact-email-group",children:[r.jsx("a",{className:"contact-email",href:`mailto:${F}`,children:F}),r.jsx("button",{type:"button",className:"btn ghost btn-copy-email",onClick:Pe,children:"Copy"})]}),r.jsx("a",{className:"btn primary feedback-sponsor",href:ue,target:"_blank",rel:"noreferrer",children:"Support us on GitHub Sponsors"}),r.jsx("iframe",{className:"sponsor-iframe",...de,style:{border:0,borderRadius:"6px"}})]})]}),r.jsxs("footer",{className:"calculator-footer",children:[r.jsx("span",{children:"Built for Canadians. Totally free. No ads."}),r.jsx("a",{className:"btn ghost footer-sponsor",href:ue,target:"_blank",rel:"noreferrer",children:"Sponsor us on GitHub"}),r.jsx("iframe",{className:"sponsor-iframe",...de,style:{border:0,borderRadius:"6px"}})]})]})}export{$t as default};
//# sourceMappingURL=TaxSmartCalculator-CkorXh3t.js.map
