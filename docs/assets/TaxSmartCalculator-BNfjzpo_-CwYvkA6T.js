import{I as o,F as t,R as O,k as ce,g as ye,y as Ne,v as ke,s as Se,X as we,a as Pe,c as Te,p as Ce,h as _e,m as Ee,d as Oe,f as Ie,u as Ue}from"./index-Bi5kBJkU.js";const Le=e=>a=>{try{return o.Children.only(e)}catch{throw new Error(Ue(a))}},Re=(e,a)=>(e||(e=a),typeof e=="string"&&(e=o.createElement("button",null,e)),e),$e=e=>(...a)=>{if(e&&typeof e=="function")return e(...a)},Q=e=>{const a=Array(e.length).fill(null),[r,n]=O.useState(a);return e.map((s,l)=>({id:s.id,mount:c=>n(d=>d.map((h,b)=>b===l?c:h)),unmount:()=>n(c=>c.map((d,h)=>h===l?null:d)),portal:()=>o.createElement(o.Fragment,null,r[l]?we.createPortal(s.component,r[l]):null)}))};var C=e=>{Se()&&console.error(e)};const x=(e,a)=>{a=a||e.displayName||e.name||"Component",e.displayName=a;const r=n=>{const s=ye();return s.loaded?o.createElement(Ne,null,o.createElement(e,{...n,clerk:s})):null};return r.displayName=`withClerk(${a})`,r},U=e=>"mount"in e,te=e=>"open"in e;class w extends o.PureComponent{constructor(){super(...arguments),this.portalRef=o.createRef()}componentDidUpdate(a){var r,n,s,l;!U(a)||!U(this.props)||(a.props.appearance!==this.props.props.appearance||((n=(r=a.props)==null?void 0:r.customPages)==null?void 0:n.length)!==((l=(s=this.props.props)==null?void 0:s.customPages)==null?void 0:l.length))&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&(U(this.props)&&this.props.mount(this.portalRef.current,this.props.props),te(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.portalRef.current&&(U(this.props)&&this.props.unmount(this.portalRef.current),te(this.props)&&this.props.close())}render(){var a,r;return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.portalRef}),U(this.props)&&((r=(a=this.props)==null?void 0:a.customPagesPortals)==null?void 0:r.map((n,s)=>O.createElement(n,{key:s}))))}}x(({clerk:e,...a})=>o.createElement(w,{mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:a}),"SignIn");x(({clerk:e,...a})=>o.createElement(w,{mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:a}),"SignUp");function J({children:e}){return C(Pe),o.createElement(o.Fragment,null,e)}function V({children:e}){return C(Te),o.createElement(o.Fragment,null,e)}const Be=x(({clerk:e,...a})=>{const{customPages:r,customPagesPortals:n}=de(a.children);return o.createElement(w,{mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...a,customPages:r},customPagesPortals:n})},"UserProfile");Object.assign(Be,{Page:J,Link:V});const Ge=x(({clerk:e,...a})=>{const{customPages:r,customPagesPortals:n}=de(a.children),s=Object.assign(a.userProfileProps||{},{customPages:r});return o.createElement(w,{mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...a,userProfileProps:s},customPagesPortals:n})},"UserButton"),Fe=Object.assign(Ge,{UserProfilePage:J,UserProfileLink:V});function X({children:e}){return C(Ie),o.createElement(o.Fragment,null,e)}function ee({children:e}){return C(Oe),o.createElement(o.Fragment,null,e)}const ze=x(({clerk:e,...a})=>{const{customPages:r,customPagesPortals:n}=ue(a.children);return o.createElement(w,{mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...a,customPages:r},customPagesPortals:n})},"OrganizationProfile");Object.assign(ze,{Page:X,Link:ee});x(({clerk:e,...a})=>o.createElement(w,{mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:a}),"CreateOrganization");const Ae=x(({clerk:e,...a})=>{const{customPages:r,customPagesPortals:n}=ue(a.children),s=Object.assign(a.organizationProfileProps||{},{customPages:r});return o.createElement(w,{mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...a,organizationProfileProps:s},customPagesPortals:n})},"OrganizationSwitcher");Object.assign(Ae,{OrganizationProfilePage:X,OrganizationProfileLink:ee});x(({clerk:e,...a})=>o.createElement(w,{mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:a}),"OrganizationList");x(({clerk:e,...a})=>o.createElement(w,{open:e.openGoogleOneTap,close:e.closeGoogleOneTap,props:a}),"GoogleOneTap");const R=(e,a)=>!!e&&o.isValidElement(e)&&(e==null?void 0:e.type)===a,de=e=>me({children:e,reorderItemsLabels:["account","security"],LinkComponent:V,PageComponent:J,componentName:"UserProfile"}),ue=e=>me({children:e,reorderItemsLabels:["members","settings"],LinkComponent:ee,PageComponent:X,componentName:"OrganizationProfile"}),me=({children:e,LinkComponent:a,PageComponent:r,reorderItemsLabels:n,componentName:s})=>{const l=[];o.Children.forEach(e,u=>{if(!R(u,r)&&!R(u,a)){u&&C(Ce(s));return}const{props:f}=u,{children:v,label:S,url:P,labelIcon:N}=f;if(R(u,r))if(ae(f,n))l.push({label:S});else if(W(f))l.push({label:S,labelIcon:N,children:v,url:P});else{C(_e(s));return}if(R(u,a))if(K(f))l.push({label:S,labelIcon:N,url:P});else{C(Ee(s));return}});const c=[],d=[],h=[];l.forEach((u,f)=>{if(W(u)){c.push({component:u.children,id:f}),d.push({component:u.labelIcon,id:f});return}K(u)&&h.push({component:u.labelIcon,id:f})});const b=Q(c),j=Q(d),y=Q(h),k=[],m=[];return l.forEach((u,f)=>{if(ae(u,n)){k.push({label:u.label});return}if(W(u)){const{portal:v,mount:S,unmount:P}=b.find(_=>_.id===f),{portal:N,mount:M,unmount:Y}=j.find(_=>_.id===f);k.push({label:u.label,url:u.url,mount:S,unmount:P,mountIcon:M,unmountIcon:Y}),m.push(v),m.push(N);return}if(K(u)){const{portal:v,mount:S,unmount:P}=y.find(N=>N.id===f);k.push({label:u.label,url:u.url,mountIcon:S,unmountIcon:P}),m.push(v);return}}),{customPages:k,customPagesPortals:m}},ae=(e,a)=>{const{children:r,label:n,url:s,labelIcon:l}=e;return!r&&!s&&!l&&a.some(c=>c===n)},W=e=>{const{children:a,label:r,url:n,labelIcon:s}=e;return!!a&&!!n&&!!s&&!!r},K=e=>{const{children:a,label:r,url:n,labelIcon:s}=e;return!a&&!!n&&!!s&&!!r};function He(){const e=ke();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const Me=({children:e})=>{const{userId:a}=ce();return a?o.createElement(o.Fragment,null,e):null},Ye=({children:e})=>{const{userId:a}=ce();return a===null?o.createElement(o.Fragment,null,e):null};x(({clerk:e,...a})=>{const{client:r,session:n}=e,{__unstable__environment:s}=e,l=r.activeSessions&&r.activeSessions.length>0;return o.useEffect(()=>{if(n===null&&l&&s){const{afterSignOutOneUrl:c}=s.displayConfig;e.navigate(c)}else e.redirectToSignIn(a)},[]),null},"RedirectToSignIn");x(({clerk:e,...a})=>(o.useEffect(()=>{e.redirectToSignUp(a)},[]),null),"RedirectToSignUp");x(({clerk:e})=>(o.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");x(({clerk:e})=>(o.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");x(({clerk:e})=>(o.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");x(({clerk:e,...a})=>(o.useEffect(()=>{e.handleRedirectCallback(a)},[]),null),"AuthenticateWithRedirectCallback");const qe=x(({clerk:e,children:a,...r})=>{const{afterSignInUrl:n,afterSignUpUrl:s,redirectUrl:l,mode:c,...d}=r;a=Re(a,"Sign in");const h=Le(a)("SignInButton"),b=()=>{const y={afterSignInUrl:n,afterSignUpUrl:s,redirectUrl:l};return c==="modal"?e.openSignIn(y):e.redirectToSignIn(y)},j={...d,onClick:async y=>(await $e(h.props.onClick)(y),b())};return o.cloneElement(h,j)},"SignInButton"),Qe=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"],T={AB:{kind:"GST_ONLY",gst:.05},BC:{kind:"GST_PST",gst:.05,pst:.07},MB:{kind:"GST_PST",gst:.05,pst:.07},NB:{kind:"HST",gst:.05,hst:.15},NL:{kind:"HST",gst:.05,hst:.15},NS:{kind:"HST",gst:.05,hst:.15},NT:{kind:"GST_ONLY",gst:.05},NU:{kind:"GST_ONLY",gst:.05},ON:{kind:"HST",gst:.05,hst:.13},PE:{kind:"HST",gst:.05,hst:.15},QC:{kind:"GST_QST",gst:.05,qst:.09975},SK:{kind:"GST_PST",gst:.05,pst:.06},YT:{kind:"GST_ONLY",gst:.05}},pe=["Standard","Exempt","Zero-rated (basic groceries)","Prepared food / restaurant","Children's clothing & footwear","Children's diapers","Children's car seats & booster seats","Feminine hygiene products","Prescription drugs / medical","Printed books (qualifying)","Newspapers (qualifying)","Public transit fares","Snack foods / candy","Sweetened carbonated beverages","Cannabis (medical)","Cannabis (non-medical)","Tobacco / alcohol","GST only","Provincial only"],We="BC";function Ke(e){switch(e){case"HST":return"HST";case"GST_QST":return"QST";case"GST_PST":return"PST";default:return"Provincial"}}function De(e){const a=T[e];return a.kind==="HST"?a.hst??0:a.kind==="GST_PST"?a.pst??0:a.kind==="GST_QST"?a.qst??0:0}function Ze(e){switch(e){case"Exempt":case"Zero-rated (basic groceries)":case"Feminine hygiene products":case"Public transit fares":case"Prescription drugs / medical":return{federal:!1,provincial:!1};case"Printed books (qualifying)":case"Newspapers (qualifying)":return{federal:!0,provincial:!0};case"GST only":return{federal:!0,provincial:!1};case"Provincial only":return{federal:!1,provincial:!0};default:return{federal:!0,provincial:!0}}}function Je(e,a,r,n){let{federal:s,provincial:l}=n;switch(r){case"Children's clothing & footwear":{["ON","NS","PE"].includes(a)&&(l=!1),a==="BC"&&(l=!1),a==="MB"&&(l=!(e<=150));break}case"Children's diapers":{["ON","NS"].includes(a)&&(l=!1),["BC","MB","SK","QC"].includes(a)&&(l=!1);break}case"Children's car seats & booster seats":{["ON","BC","MB"].includes(a)&&(l=!1);break}case"Prepared food / restaurant":{a==="ON"&&e<=4&&(l=!1),a==="BC"&&(l=!1),["MB","SK"].includes(a)&&(l=!0);break}case"Sweetened carbonated beverages":{["BC","MB","SK"].includes(a)&&(l=!0);break}case"Snack foods / candy":{a==="BC"&&(l=!1),["MB","SK"].includes(a)&&(l=!0);break}case"Printed books (qualifying)":{["ON","NS","NB","NL","PE"].includes(a)&&(l=!1),["BC","MB","SK","QC"].includes(a)&&(l=!1);break}case"Newspapers (qualifying)":{["ON","BC"].includes(a)&&(l=!1);break}}return{federal:s,provincial:l}}function Ve(e,a){const r=Number.isFinite(e.amount)?Math.max(e.amount,0):0,n=Ze(e.category),{federal:s,provincial:l}=Je(r,a,e.category,n),c=T[a];let d=0,h=0,b=0;c.kind==="HST"?s&&l?b=r*(c.hst??0):s&&!l?d=r*c.gst:!s&&l&&(h=r*((c.hst??0)-c.gst)):c.kind==="GST_PST"?(s&&(d=r*c.gst),l&&(h=r*(c.pst??0))):c.kind==="GST_QST"?(s&&(d=r*c.gst),l&&(h=r*(c.qst??0))):s&&(d=r*c.gst);const j=d+h+b;return{amount:r,federalTax:d,provincialTax:h,hstTax:b,totalTax:j,grandTotal:r+j}}function Xe(e){return e.reduce((a,r)=>({subTotal:a.subTotal+r.amount,federal:a.federal+r.federalTax,provincial:a.provincial+r.provincialTax,hst:a.hst+r.hstTax,tax:a.tax+r.totalTax,grandTotal:a.grandTotal+r.grandTotal}),{subTotal:0,federal:0,provincial:0,hst:0,tax:0,grandTotal:0})}function et(e,a){const r=e.map(n=>Ve(n,a));return{lines:r,totals:Xe(r)}}function he(e){return pe.includes(e)?e:"Standard"}const Z="state";function tt(e){return typeof btoa=="function"?btoa(e):e}function at(e){return typeof atob=="function"?atob(e):e}function rt(e){const a=JSON.stringify(e),r=encodeURIComponent(tt(a));return`${Z}=${r}`}function nt(e){if(!e.startsWith(`${Z}=`))return null;const a=e.slice(Z.length+1);try{const r=at(decodeURIComponent(a)),n=JSON.parse(r);if(!n||typeof n!="object")return null;const s=n.province,l=Array.isArray(n.items)?n.items:[];if(!s)return null;const c=l.map((d,h)=>({label:typeof(d==null?void 0:d.label)=="string"&&d.label.trim()?d.label:`Item ${h+1}`,category:he(d==null?void 0:d.category),amount:typeof(d==null?void 0:d.amount)=="string"||typeof(d==null?void 0:d.amount)=="number"?String(d.amount):"0"}));return{province:s,items:c}}catch(r){return console.warn("Failed to decode share state",r),null}}function st(e){if(!e)return null;const a=e.replace(/^#/,"").split("&");for(const r of a){const n=nt(r);if(n)return n}return null}const ge="tax-smart-theme";function A(){return typeof window<"u"&&typeof document<"u"}function re(){if(!A())return null;const e=window.localStorage.getItem(ge);return e==="light"||e==="dark"?e:null}function ne(e){if(!A())return;const a=document.documentElement;a.classList.toggle("dark",e==="dark"),a.setAttribute("data-theme",e),a.style.setProperty("color-scheme",e)}function lt(e="dark"){const[a,r]=o.useState(()=>{const s=re()??e;return ne(s),s});o.useEffect(()=>{ne(a),A()&&window.localStorage.setItem(ge,a)},[a]),o.useEffect(()=>{if(!A())return;const s=window.matchMedia("(prefers-color-scheme: dark)"),l=c=>{r(d=>re()??(c.matches?"dark":"light"))};return s.addEventListener("change",l),()=>s.removeEventListener("change",l)},[]);const n=o.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]);return{theme:a,setTheme:r,toggleTheme:n}}/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var ot={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const it=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(e,a)=>{const r=O.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:h,...b},j)=>O.createElement("svg",{ref:j,...ot,width:s,height:s,stroke:n,strokeWidth:c?Number(l)*24/Number(s):l,className:["lucide",`lucide-${it(e)}`,d].join(" "),...b},[...a.map(([y,k])=>O.createElement(y,k)),...Array.isArray(h)?h:[h]]));return r.displayName=`${e}`,r};/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const $=H("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const xe=H("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ct=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
* @license lucide-react v0.294.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const E=H("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var fe="https://js.stripe.com/v3",dt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ut=function(){for(var e=document.querySelectorAll('script[src^="'.concat(fe,'"]')),a=0;a<e.length;a++){var r=e[a];if(dt.test(r.src))return r}return null},se=function(e){var a="",r=document.createElement("script");r.src="".concat(fe).concat(a);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},mt=function(e,a){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:a})},L=null,B=null,G=null,pt=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},ht=function(e,a){return function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))}},gt=function(e){return L!==null?L:(L=new Promise(function(a,r){if(typeof window>"u"||typeof document>"u"){a(null);return}if(window.Stripe){a(window.Stripe);return}try{var n=ut();if(!(n&&e)){if(!n)n=se(e);else if(n&&G!==null&&B!==null){var s;n.removeEventListener("load",G),n.removeEventListener("error",B),(s=n.parentNode)===null||s===void 0||s.removeChild(n),n=se(e)}}G=ht(a,r),B=pt(r),n.addEventListener("load",G),n.addEventListener("error",B)}catch(l){r(l);return}}),L.catch(function(a){return L=null,Promise.reject(a)}))},xt=function(e,a,r){if(e===null)return null;var n=e.apply(void 0,a);return mt(n,r),n},F,be=!1,ve=function(){return F||(F=gt(null).catch(function(e){return F=null,Promise.reject(e)}),F)};Promise.resolve().then(function(){return ve()}).catch(function(e){be||console.warn(e)});var ft=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];be=!0;var n=Date.now();return ve().then(function(s){return xt(s,a,n)})},le={};const oe=ft("pk_live_51RycmaC8Z2peWf8UJKHZEg6hCF2oWKv8znUzAgl2UdxLkTuHkkueL54BRkGg5qMmBg5gvp5DainqdI0fArJqkRsF0or1kridjs"),ie={PRO_MONTHLY:le.VITE_STRIPE_MONTHLY_PRICE_ID||"price_your_monthly_price_id_here",PRO_YEARLY:le.VITE_STRIPE_YEARLY_PRICE_ID||"price_your_yearly_price_id_here"};async function bt(e,a,r){if(!oe){console.error("Stripe failed to initialize");return}try{const n=await(await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e,userId:a,email:r,successUrl:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})})).json();if(n.error){console.error("Error creating checkout session:",n.error);return}const s=await oe;if(s){const{error:l}=await s.redirectToCheckout({sessionId:n.id});l&&console.error("Error redirecting to checkout:",l)}else console.error("Stripe failed to initialize")}catch(n){console.error("Error:",n)}}function vt({isOpen:e,onClose:a}){const{user:r}=He(),[n,s]=O.useState(!1);if(!e)return null;const l=async c=>{var d;if(r){s(!0);try{bt(c,r.id,((d=r.primaryEmailAddress)==null?void 0:d.emailAddress)||"")}finally{s(!1)}}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upgrade to Pro"}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(ct,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Free"}),t.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$0",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})]}),t.jsxs("ul",{className:"space-y-3 mb-6",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Up to 5 line items"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Single province calculations"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Public share links (24h)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"All tax categories"})]})]}),t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Plan"})})]}),t.jsxs("div",{className:"border-2 border-amber-500 rounded-lg p-6 relative",children:[t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:t.jsx("span",{className:"bg-amber-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center justify-center gap-2",children:[t.jsx(xe,{className:"h-5 w-5 text-amber-500"}),"Pro"]}),t.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$9",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"or $90/year (save 17%)"})]}),t.jsxs("ul",{className:"space-y-3 mb-6",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Unlimited"})," line items"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Multi-province"})," comparison"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"CSV & PDF"})," export"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Private"})," share links"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Saved"})," calculations"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(E,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Priority"})," support"]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>l(ie.PRO_MONTHLY),disabled:n,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:n?"Loading...":"Upgrade Monthly"}),t.jsx("button",{onClick:()=>l(ie.PRO_YEARLY),disabled:n,className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:n?"Loading...":"Upgrade Yearly (Save 17%)"})]})]})]}),t.jsx("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400",children:t.jsx("p",{children:"✓ Cancel anytime • ✓ 30-day money-back guarantee • ✓ Secure checkout"})})]})})})}const jt=new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"});function z(e,a={}){return{id:crypto.randomUUID(),label:a.label??`Item ${e}`,category:a.category??"Standard",amount:a.amount??"0"}}function yt(e){if(!e)return 0;const a=Number.parseFloat(e);return Number.isFinite(a)&&a>0?a:0}function g(e){return jt.format(e)}async function D(e){var a;if(typeof navigator<"u"&&(a=navigator.clipboard)!=null&&a.writeText)try{return await navigator.clipboard.writeText(e),!0}catch(r){return console.warn("Clipboard write failed",r),!1}return!1}function Nt(e){return e.map(({label:a,category:r,amount:n})=>({label:a,category:r,amount:n}))}function St(){const{theme:e,toggleTheme:a}=lt("dark"),[r,n]=o.useState(!1),[s,l]=o.useState(We),[c,d]=o.useState([z(1)]),[h,b]=o.useState(null),[j,y]=o.useState(0),k=o.useMemo(()=>c.map(i=>({amount:yt(i.amount),category:i.category})),[c]),{totals:m}=o.useMemo(()=>et(k,s),[k,s]),u=Ke(T[s].kind),f=De(s),v=o.useCallback(i=>{b(i),window.setTimeout(()=>b(null),1800)},[]),S=o.useCallback(()=>{d(i=>[...i,z(i.length+1)])},[]),P=o.useCallback(i=>{d(p=>p.length>1?p.filter(I=>I.id!==i):p)},[]),N=o.useCallback((i,p)=>{d(I=>I.map(q=>q.id===i?{...q,...p}:q))},[]),M=o.useCallback(()=>{y(i=>i+1),v("Totals refreshed")},[v]),Y=o.useCallback(async()=>{const i=[`Province: ${s}`,`Subtotal: ${g(m.subTotal)}`,T[s].kind==="HST"?`HST: ${g(m.hst)}`:`GST: ${g(m.federal)}
${u}: ${g(m.provincial)}`,`Total tax: ${g(m.tax)}`,`Grand total: ${g(m.grandTotal)}`],p=await D(i.join(`
`));v(p?"Totals copied":"Clipboard not available")},[s,u,v,m]),_=o.useCallback(async()=>{const i=[`Province: ${s}`,`Subtotal: ${g(m.subTotal)}`,T[s].kind==="HST"?`HST: ${g(m.hst)}`:`GST: ${g(m.federal)}
${u}: ${g(m.provincial)}`,`Total tax: ${g(m.tax)}`,`Grand total: ${g(m.grandTotal)}`],p=await D(i.join(`
`));v(p?"Results copied to clipboard":"Clipboard not available")},[s,u,v,m]),je=o.useCallback(async()=>{if(typeof window>"u")return;const i=new URL(window.location.href);i.hash=rt({province:s,items:Nt(c)});const p=await D(i.toString());v(p?"Shareable link copied":"Clipboard not available")},[c,s,v]);return o.useEffect(()=>{if(typeof window>"u")return;const i=st(window.location.hash);i&&(l(i.province),d(i.items.length?i.items.map((p,I)=>z(I+1,{label:p.label,category:he(p.category),amount:p.amount})):[z(1)]))},[]),t.jsxs("div",{className:"calculator-shell",children:[t.jsxs("header",{className:"calculator-header",children:[t.jsxs("div",{className:"calculator-brand",children:[t.jsx("span",{className:"calculator-logo","aria-hidden":!0,children:"CA"}),t.jsxs("div",{children:[t.jsx("p",{className:"brand-name",children:"TaxSmart"}),t.jsx("p",{className:"brand-tagline",children:"GST / HST / PST & QST in one view"})]})]}),t.jsxs("div",{className:"header-actions",children:[t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:je,children:"Share app"}),t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:_,children:"Copy results"}),t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:a,children:e==="dark"?"Light mode":"Dark mode"}),t.jsxs("button",{onClick:()=>n(!0),className:"btn whitespace-nowrap bg-gradient-to-r from-amber-400 to-amber-500 text-white border-transparent hover:from-amber-500 hover:to-amber-600 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5",children:[t.jsx(xe,{className:"h-3.5 w-3.5 inline-block mr-1.5"}),t.jsx("span",{children:"Upgrade"})]}),t.jsx(Ye,{children:t.jsx(qe,{mode:"modal",children:t.jsx("button",{className:"btn whitespace-nowrap bg-indigo-600 text-white hover:bg-indigo-700 border-transparent",children:"Sign in"})})}),t.jsx(Me,{children:t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Fe,{afterSignOutUrl:"/"})})})]})]}),t.jsx(vt,{isOpen:r,onClose:()=>n(!1)}),h&&t.jsx("div",{role:"status",className:"calculator-notice",children:h}),t.jsxs("main",{className:"calculator-main grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("section",{className:"panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsx("h1",{className:"panel-title",children:"Canada sales-tax smart calculator"}),t.jsx("span",{className:"badge",children:"Free forever"})]}),t.jsx("p",{className:"panel-subtitle",children:"Estimate combined GST, HST, PST, and QST with per-province category rules."}),t.jsxs("div",{className:"province-grid",children:[t.jsxs("article",{className:"total-card form-field-card","aria-labelledby":"province-select-label",children:[t.jsx("label",{id:"province-select-label",className:"field-label",htmlFor:"province-select",children:"Province / Territory"}),t.jsx("select",{id:"province-select",className:"input select",value:s,onChange:i=>l(i.target.value),children:Qe.map(i=>t.jsx("option",{value:i,children:i},i))})]}),t.jsxs("div",{className:"rate-cards",children:[t.jsxs("div",{className:"rate-card",children:[t.jsx("p",{className:"muted",children:"Federal (GST)"}),t.jsxs("p",{className:"rate-value",children:[(T[s].gst*100).toFixed(1),"%"]})]}),t.jsxs("div",{className:"rate-card",children:[t.jsxs("p",{className:"muted",children:["Provincial (",u,")"]}),t.jsx("p",{className:"rate-value",children:f?`${(f*100).toFixed(2)}%`:"—"})]})]})]})]}),t.jsxs("section",{className:"panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsx("h2",{className:"panel-title",children:"Line items"}),t.jsx("button",{type:"button",className:"btn ghost",onClick:S,children:"+ Add item"})]}),t.jsx("div",{className:"line-items",children:c.map(i=>t.jsxs("div",{className:"line-item",children:[t.jsx("label",{className:"sr-only",htmlFor:`label-${i.id}`,children:"Item label"}),t.jsx("input",{id:`label-${i.id}`,className:"input",value:i.label,onChange:p=>N(i.id,{label:p.target.value}),placeholder:"Item label"}),t.jsx("label",{className:"sr-only",htmlFor:`category-${i.id}`,children:"Item category"}),t.jsx("select",{id:`category-${i.id}`,className:"input",value:i.category,onChange:p=>N(i.id,{category:p.target.value}),children:pe.map(p=>t.jsx("option",{value:p,children:p},p))}),t.jsx("label",{className:"sr-only",htmlFor:`amount-${i.id}`,children:"Item amount"}),t.jsxs("div",{className:"amount-field",children:[t.jsx("span",{"aria-hidden":!0,children:"$"}),t.jsx("input",{id:`amount-${i.id}`,className:"input",value:i.amount,onChange:p=>N(i.id,{amount:p.target.value}),inputMode:"decimal",type:"number",step:"0.01",min:"0",placeholder:"0.00"})]}),t.jsx("button",{type:"button",className:"btn icon","aria-label":"Remove line item",onClick:()=>P(i.id),disabled:c.length===1,children:"×"})]},i.id))})]}),t.jsx("div",{className:"panel actions",children:t.jsx("button",{type:"button",className:"btn primary",onClick:M,children:"Calculate tax"})}),t.jsxs("section",{className:"panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsx("h2",{className:"panel-title",children:"Totals"}),t.jsxs("div",{className:"header-actions",children:[t.jsx("button",{type:"button",className:"btn",onClick:Y,children:"Copy totals"}),t.jsx("button",{type:"button",className:"btn",onClick:_,children:"Share link"})]})]}),t.jsxs("div",{className:"totals-grid",children:[t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"Subtotal"}),t.jsx("p",{className:"total-value",children:g(m.subTotal)})]}),T[s].kind==="HST"?t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"HST"}),t.jsx("p",{className:"total-value",children:g(m.hst)})]}):t.jsxs(t.Fragment,{children:[t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"GST"}),t.jsx("p",{className:"total-value",children:g(m.federal)})]}),t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:u}),t.jsx("p",{className:"total-value",children:g(m.provincial)})]})]}),t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"Total tax"}),t.jsx("p",{className:"total-value",children:g(m.tax)})]}),t.jsxs("article",{className:"total-card highlight",children:[t.jsx("p",{className:"muted",children:"Grand total"}),t.jsx("p",{className:"total-value",children:g(m.grandTotal)})]})]})]},j),t.jsxs("section",{className:"panel",children:[t.jsx("h2",{className:"panel-title",children:"References"}),t.jsxs("ul",{className:"reference-list",children:[t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/gst-hst-businesses/charge-collect-type-supply.html",target:"_blank",rel:"noreferrer",children:"CRA: Charge & collect GST/HST by type of supply"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-063.html",target:"_blank",rel:"noreferrer",children:"CRA GI-063: Ontario point-of-sale rebates (children's goods, books, diapers, car seats)"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-060.html",target:"_blank",rel:"noreferrer",children:"CRA GI-060: Ontario point-of-sale rebate on newspapers"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst",target:"_blank",rel:"noreferrer",children:"BC PST overview & exemptions"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst/ice-cream-sweetened-beverages",target:"_blank",rel:"noreferrer",children:"BC PST: Sweetened carbonated beverages"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.gov.mb.ca/finance/taxation/taxes/retail.html",target:"_blank",rel:"noreferrer",children:"Manitoba RST exemptions (incl. children's clothing)"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.revenuquebec.ca/en/",target:"_blank",rel:"noreferrer",children:"Revenu Québec: QST exemptions (books, baby products)"})})]}),t.jsx("p",{className:"muted",children:"Excise duties or deposits on alcohol, tobacco, cannabis, and containers are not included."})]})]}),t.jsx("footer",{className:"calculator-footer",children:"Built for Canadians. Totally free. No ads."})]})}export{St as default};
//# sourceMappingURL=TaxSmartCalculator-BNfjzpo_-CwYvkA6T.js.map
