{"version":3,"file":"TaxSmartCalculator-eKBU6V8k.js","sources":["../../node_modules/@clerk/clerk-react/dist/esm/utils/childrenUtils.js","../../node_modules/@clerk/clerk-react/dist/esm/utils/useCustomElementPortal.js","../../node_modules/@clerk/shared/dist/index.mjs","../../node_modules/@clerk/clerk-react/dist/esm/components/withClerk.js","../../node_modules/@clerk/clerk-react/dist/esm/components/uiComponents.js","../../node_modules/@clerk/clerk-react/dist/esm/utils/useCustomPages.js","../../node_modules/@clerk/clerk-react/dist/esm/hooks/useUser.js","../../node_modules/@clerk/clerk-react/dist/esm/components/controlComponents.js","../../node_modules/@clerk/clerk-react/dist/esm/components/SignInButton.js","../../src/lib/taxData.ts","../../src/lib/taxCalculator.ts","../../src/lib/share.ts","../../src/hooks/useDarkMode.ts","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/crown.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../node_modules/@stripe/stripe-js/dist/stripe.esm.js","../../src/lib/billing.ts","../../src/components/PricingModal.tsx","../../src/components/TaxSmartCalculator/TaxSmartCalculator.tsx"],"sourcesContent":["import \"../chunk-XTU7I5IS.js\";\nimport React from \"react\";\nimport { multipleChildrenInButtonComponent } from \"../errors\";\nconst assertSingleChild = (children) => (name) => {\n  try {\n    return React.Children.only(children);\n  } catch (e) {\n    throw new Error(multipleChildrenInButtonComponent(name));\n  }\n};\nconst normalizeWithDefaultValue = (children, defaultText) => {\n  if (!children) {\n    children = defaultText;\n  }\n  if (typeof children === \"string\") {\n    children = /* @__PURE__ */ React.createElement(\"button\", null, children);\n  }\n  return children;\n};\nconst safeExecute = (cb) => (...args) => {\n  if (cb && typeof cb === \"function\") {\n    return cb(...args);\n  }\n};\nexport {\n  assertSingleChild,\n  normalizeWithDefaultValue,\n  safeExecute\n};\n//# sourceMappingURL=childrenUtils.js.map","import \"../chunk-XTU7I5IS.js\";\nimport React, { useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nconst useCustomElementPortal = (elements) => {\n  const initialState = Array(elements.length).fill(null);\n  const [nodes, setNodes] = useState(initialState);\n  return elements.map((el, index) => ({\n    id: el.id,\n    mount: (node) => setNodes((prevState) => prevState.map((n, i) => i === index ? node : n)),\n    unmount: () => setNodes((prevState) => prevState.map((n, i) => i === index ? null : n)),\n    portal: () => /* @__PURE__ */ React.createElement(React.Fragment, null, nodes[index] ? createPortal(el.component, nodes[index]) : null)\n  }));\n};\nexport {\n  useCustomElementPortal\n};\n//# sourceMappingURL=useCustomElementPortal.js.map","import {\n  Poller,\n  createWorkerTimers,\n  noop\n} from \"./chunk-GBGFSJA3.mjs\";\nimport {\n  getRequestUrl,\n  isHttpOrHttps,\n  isProxyUrlRelative,\n  isValidProxyUrl,\n  proxyUrlToAbsoluteURL\n} from \"./chunk-MHVPBPEZ.mjs\";\nimport {\n  camelToSnake,\n  deepCamelToSnake,\n  deepSnakeToCamel,\n  isIPV4Address,\n  snakeToCamel,\n  titleize,\n  toSentence\n} from \"./chunk-5QXIOV6T.mjs\";\nimport {\n  addClerkPrefix,\n  getClerkJsMajorVersionOrTag,\n  getScriptUrl,\n  isStaging,\n  parseSearchParams,\n  stripScheme\n} from \"./chunk-BX6URPWV.mjs\";\nimport {\n  extension,\n  readJSONFile\n} from \"./chunk-5JU2E5TY.mjs\";\nimport {\n  handleValueOrFn\n} from \"./chunk-TRWMHODU.mjs\";\nimport {\n  buildPublishableKey,\n  createDevOrStagingUrlCache,\n  isDevelopmentFromApiKey,\n  isLegacyFrontendApiKey,\n  isProductionFromApiKey,\n  isPublishableKey,\n  parsePublishableKey\n} from \"./chunk-IAZRYRAH.mjs\";\nimport {\n  isomorphicAtob\n} from \"./chunk-TETGTEI2.mjs\";\nimport {\n  loadScript\n} from \"./chunk-AOO6TJNL.mjs\";\nimport {\n  LocalStorageBroadcastChannel\n} from \"./chunk-RSOCGYTF.mjs\";\nimport {\n  inBrowser,\n  isBrowserOnline,\n  isValidBrowser,\n  isValidBrowserOnline,\n  userAgentIsRobot\n} from \"./chunk-LJ4R7M7R.mjs\";\nimport {\n  callWithRetry\n} from \"./chunk-4PW5MDZA.mjs\";\nimport {\n  colorToSameTypeString,\n  hasAlpha,\n  hexStringToRgbaColor,\n  isHSLColor,\n  isRGBColor,\n  isTransparent,\n  isValidHexString,\n  isValidHslaString,\n  isValidRgbaString,\n  stringToHslaColor,\n  stringToSameTypeColor\n} from \"./chunk-WUG2DC4W.mjs\";\nimport {\n  addYears,\n  dateTo12HourTime,\n  differenceInCalendarDays,\n  formatRelative,\n  normalizeDate\n} from \"./chunk-FSKKI4LG.mjs\";\nimport {\n  DEV_BROWSER_JWT_MARKER,\n  DEV_BROWSER_SSO_JWT_PARAMETER,\n  extractDevBrowserJWTFromURLHash,\n  extractDevBrowserJWTFromURLSearchParams,\n  setDevBrowserJWTInURL\n} from \"./chunk-ECUSKG7K.mjs\";\nimport {\n  ClerkAPIResponseError,\n  ClerkRuntimeError,\n  EmailLinkError,\n  EmailLinkErrorCode,\n  MagicLinkError,\n  MagicLinkErrorCode,\n  buildErrorThrower,\n  is4xxError,\n  isCaptchaError,\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isEmailLinkError,\n  isKnownError,\n  isMagicLinkError,\n  isMetamaskError,\n  isNetworkError,\n  isPasswordPwnedError,\n  isUnauthorizedError,\n  isUserLockedError,\n  parseError,\n  parseErrors\n} from \"./chunk-VN4YMSVR.mjs\";\nimport {\n  deprecated,\n  deprecatedObjectProperty,\n  deprecatedProperty,\n  isDevelopmentEnvironment,\n  isProductionEnvironment,\n  isTestEnvironment\n} from \"./chunk-IC4FGZI3.mjs\";\nimport \"./chunk-NDCDZYN6.mjs\";\n\n// src/utils/createDeferredPromise.ts\nvar createDeferredPromise = () => {\n  let resolve = noop;\n  let reject = noop;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve, reject };\n};\n\n// src/utils/runWithExponentialBackOff.ts\nvar defaultOptions = {\n  firstDelay: 125,\n  maxDelay: 0,\n  timeMultiple: 2,\n  shouldRetry: () => true\n};\nvar sleep = async (ms) => new Promise((s) => setTimeout(s, ms));\nvar createExponentialDelayAsyncFn = (opts) => {\n  let timesCalled = 0;\n  const calculateDelayInMs = () => {\n    const constant = opts.firstDelay;\n    const base = opts.timeMultiple;\n    const delay = constant * Math.pow(base, timesCalled);\n    return Math.min(opts.maxDelay || delay, delay);\n  };\n  return async () => {\n    await sleep(calculateDelayInMs());\n    timesCalled++;\n  };\n};\nvar runWithExponentialBackOff = async (callback, options = {}) => {\n  let iterationsCount = 0;\n  const { shouldRetry, firstDelay, maxDelay, timeMultiple } = {\n    ...defaultOptions,\n    ...options\n  };\n  const delay = createExponentialDelayAsyncFn({ firstDelay, maxDelay, timeMultiple });\n  while (true) {\n    try {\n      return await callback();\n    } catch (e) {\n      iterationsCount++;\n      if (!shouldRetry(e, iterationsCount)) {\n        throw e;\n      }\n      await delay();\n    }\n  }\n};\n\n// src/utils/logErrorInDevMode.ts\nvar logErrorInDevMode = (message) => {\n  if (isDevelopmentEnvironment()) {\n    console.error(message);\n  }\n};\nexport {\n  ClerkAPIResponseError,\n  ClerkRuntimeError,\n  DEV_BROWSER_JWT_MARKER,\n  DEV_BROWSER_SSO_JWT_PARAMETER,\n  EmailLinkError,\n  EmailLinkErrorCode,\n  LocalStorageBroadcastChannel,\n  MagicLinkError,\n  MagicLinkErrorCode,\n  Poller,\n  addClerkPrefix,\n  addYears,\n  buildErrorThrower,\n  buildPublishableKey,\n  callWithRetry,\n  camelToSnake,\n  colorToSameTypeString,\n  createDeferredPromise,\n  createDevOrStagingUrlCache,\n  createWorkerTimers,\n  dateTo12HourTime,\n  deepCamelToSnake,\n  deepSnakeToCamel,\n  deprecated,\n  deprecatedObjectProperty,\n  deprecatedProperty,\n  differenceInCalendarDays,\n  extension,\n  extractDevBrowserJWTFromURLHash,\n  extractDevBrowserJWTFromURLSearchParams,\n  formatRelative,\n  getClerkJsMajorVersionOrTag,\n  getRequestUrl,\n  getScriptUrl,\n  handleValueOrFn,\n  hasAlpha,\n  hexStringToRgbaColor,\n  inBrowser,\n  is4xxError,\n  isBrowserOnline,\n  isCaptchaError,\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isDevelopmentEnvironment,\n  isDevelopmentFromApiKey,\n  isEmailLinkError,\n  isHSLColor,\n  isHttpOrHttps,\n  isIPV4Address,\n  isKnownError,\n  isLegacyFrontendApiKey,\n  isMagicLinkError,\n  isMetamaskError,\n  isNetworkError,\n  isPasswordPwnedError,\n  isProductionEnvironment,\n  isProductionFromApiKey,\n  isProxyUrlRelative,\n  isPublishableKey,\n  isRGBColor,\n  isStaging,\n  isTestEnvironment,\n  isTransparent,\n  isUnauthorizedError,\n  isUserLockedError,\n  isValidBrowser,\n  isValidBrowserOnline,\n  isValidHexString,\n  isValidHslaString,\n  isValidProxyUrl,\n  isValidRgbaString,\n  isomorphicAtob,\n  loadScript,\n  logErrorInDevMode,\n  noop,\n  normalizeDate,\n  parseError,\n  parseErrors,\n  parsePublishableKey,\n  parseSearchParams,\n  proxyUrlToAbsoluteURL,\n  readJSONFile,\n  runWithExponentialBackOff,\n  setDevBrowserJWTInURL,\n  snakeToCamel,\n  stringToHslaColor,\n  stringToSameTypeColor,\n  stripScheme,\n  titleize,\n  toSentence,\n  userAgentIsRobot\n};\n//# sourceMappingURL=index.mjs.map","import \"../chunk-XTU7I5IS.js\";\nimport React from \"react\";\nimport { useIsomorphicClerkContext } from \"../contexts/IsomorphicClerkContext\";\nimport { LoadedGuarantee } from \"../contexts/StructureContext\";\nimport { hocChildrenNotAFunctionError } from \"../errors\";\nconst withClerk = (Component, displayName) => {\n  displayName = displayName || Component.displayName || Component.name || \"Component\";\n  Component.displayName = displayName;\n  const HOC = (props) => {\n    const clerk = useIsomorphicClerkContext();\n    if (!clerk.loaded) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(LoadedGuarantee, null, /* @__PURE__ */ React.createElement(\n      Component,\n      {\n        ...props,\n        clerk\n      }\n    ));\n  };\n  HOC.displayName = `withClerk(${displayName})`;\n  return HOC;\n};\nconst WithClerk = ({ children }) => {\n  const clerk = useIsomorphicClerkContext();\n  if (typeof children !== \"function\") {\n    throw new Error(hocChildrenNotAFunctionError);\n  }\n  if (!clerk.loaded) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(LoadedGuarantee, null, children(clerk));\n};\nexport {\n  WithClerk,\n  withClerk\n};\n//# sourceMappingURL=withClerk.js.map","import \"../chunk-XTU7I5IS.js\";\nimport { logErrorInDevMode } from \"@clerk/shared\";\nimport React, { createElement } from \"react\";\nimport {\n  organizationProfileLinkRenderedError,\n  organizationProfilePageRenderedError,\n  userProfileLinkRenderedError,\n  userProfilePageRenderedError\n} from \"../errors\";\nimport { useOrganizationProfileCustomPages, useUserProfileCustomPages } from \"../utils\";\nimport { withClerk } from \"./withClerk\";\nconst isMountProps = (props) => {\n  return \"mount\" in props;\n};\nconst isOpenProps = (props) => {\n  return \"open\" in props;\n};\nclass Portal extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.portalRef = React.createRef();\n  }\n  componentDidUpdate(prevProps) {\n    var _a, _b, _c, _d;\n    if (!isMountProps(prevProps) || !isMountProps(this.props)) {\n      return;\n    }\n    if (prevProps.props.appearance !== this.props.props.appearance || ((_b = (_a = prevProps.props) == null ? void 0 : _a.customPages) == null ? void 0 : _b.length) !== ((_d = (_c = this.props.props) == null ? void 0 : _c.customPages) == null ? void 0 : _d.length)) {\n      this.props.updateProps({ node: this.portalRef.current, props: this.props.props });\n    }\n  }\n  componentDidMount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.mount(this.portalRef.current, this.props.props);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.open(this.props.props);\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.unmount(this.portalRef.current);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.close();\n      }\n    }\n  }\n  render() {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", { ref: this.portalRef }), isMountProps(this.props) && ((_b = (_a = this.props) == null ? void 0 : _a.customPagesPortals) == null ? void 0 : _b.map((portal, index) => createElement(portal, { key: index }))));\n  }\n}\nconst SignIn = withClerk(({ clerk, ...props }) => {\n  return /* @__PURE__ */ React.createElement(\n    Portal,\n    {\n      mount: clerk.mountSignIn,\n      unmount: clerk.unmountSignIn,\n      updateProps: clerk.__unstable__updateProps,\n      props\n    }\n  );\n}, \"SignIn\");\nconst SignUp = withClerk(({ clerk, ...props }) => {\n  return /* @__PURE__ */ React.createElement(\n    Portal,\n    {\n      mount: clerk.mountSignUp,\n      unmount: clerk.unmountSignUp,\n      updateProps: clerk.__unstable__updateProps,\n      props\n    }\n  );\n}, \"SignUp\");\nfunction UserProfilePage({ children }) {\n  logErrorInDevMode(userProfilePageRenderedError);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction UserProfileLink({ children }) {\n  logErrorInDevMode(userProfileLinkRenderedError);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nconst _UserProfile = withClerk(\n  ({ clerk, ...props }) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    return /* @__PURE__ */ React.createElement(\n      Portal,\n      {\n        mount: clerk.mountUserProfile,\n        unmount: clerk.unmountUserProfile,\n        updateProps: clerk.__unstable__updateProps,\n        props: { ...props, customPages },\n        customPagesPortals\n      }\n    );\n  },\n  \"UserProfile\"\n);\nconst UserProfile = Object.assign(_UserProfile, {\n  Page: UserProfilePage,\n  Link: UserProfileLink\n});\nconst _UserButton = withClerk(\n  ({ clerk, ...props }) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    const userProfileProps = Object.assign(props.userProfileProps || {}, { customPages });\n    return /* @__PURE__ */ React.createElement(\n      Portal,\n      {\n        mount: clerk.mountUserButton,\n        unmount: clerk.unmountUserButton,\n        updateProps: clerk.__unstable__updateProps,\n        props: { ...props, userProfileProps },\n        customPagesPortals\n      }\n    );\n  },\n  \"UserButton\"\n);\nconst UserButton = Object.assign(_UserButton, {\n  UserProfilePage,\n  UserProfileLink\n});\nfunction OrganizationProfilePage({ children }) {\n  logErrorInDevMode(organizationProfilePageRenderedError);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction OrganizationProfileLink({ children }) {\n  logErrorInDevMode(organizationProfileLinkRenderedError);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nconst _OrganizationProfile = withClerk(\n  ({ clerk, ...props }) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    return /* @__PURE__ */ React.createElement(\n      Portal,\n      {\n        mount: clerk.mountOrganizationProfile,\n        unmount: clerk.unmountOrganizationProfile,\n        updateProps: clerk.__unstable__updateProps,\n        props: { ...props, customPages },\n        customPagesPortals\n      }\n    );\n  },\n  \"OrganizationProfile\"\n);\nconst OrganizationProfile = Object.assign(_OrganizationProfile, {\n  Page: OrganizationProfilePage,\n  Link: OrganizationProfileLink\n});\nconst CreateOrganization = withClerk(({ clerk, ...props }) => {\n  return /* @__PURE__ */ React.createElement(\n    Portal,\n    {\n      mount: clerk.mountCreateOrganization,\n      unmount: clerk.unmountCreateOrganization,\n      updateProps: clerk.__unstable__updateProps,\n      props\n    }\n  );\n}, \"CreateOrganization\");\nconst _OrganizationSwitcher = withClerk(\n  ({ clerk, ...props }) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    const organizationProfileProps = Object.assign(props.organizationProfileProps || {}, { customPages });\n    return /* @__PURE__ */ React.createElement(\n      Portal,\n      {\n        mount: clerk.mountOrganizationSwitcher,\n        unmount: clerk.unmountOrganizationSwitcher,\n        updateProps: clerk.__unstable__updateProps,\n        props: { ...props, organizationProfileProps },\n        customPagesPortals\n      }\n    );\n  },\n  \"OrganizationSwitcher\"\n);\nconst OrganizationSwitcher = Object.assign(_OrganizationSwitcher, {\n  OrganizationProfilePage,\n  OrganizationProfileLink\n});\nconst OrganizationList = withClerk(({ clerk, ...props }) => {\n  return /* @__PURE__ */ React.createElement(\n    Portal,\n    {\n      mount: clerk.mountOrganizationList,\n      unmount: clerk.unmountOrganizationList,\n      updateProps: clerk.__unstable__updateProps,\n      props\n    }\n  );\n}, \"OrganizationList\");\nconst GoogleOneTap = withClerk(({ clerk, ...props }) => {\n  return /* @__PURE__ */ React.createElement(\n    Portal,\n    {\n      open: clerk.openGoogleOneTap,\n      close: clerk.closeGoogleOneTap,\n      props\n    }\n  );\n}, \"GoogleOneTap\");\nexport {\n  CreateOrganization,\n  GoogleOneTap,\n  OrganizationList,\n  OrganizationProfile,\n  OrganizationProfileLink,\n  OrganizationProfilePage,\n  OrganizationSwitcher,\n  SignIn,\n  SignUp,\n  UserButton,\n  UserProfile,\n  UserProfileLink,\n  UserProfilePage\n};\n//# sourceMappingURL=uiComponents.js.map","import \"../chunk-XTU7I5IS.js\";\nimport { logErrorInDevMode } from \"@clerk/shared\";\nimport React from \"react\";\nimport {\n  OrganizationProfileLink,\n  OrganizationProfilePage,\n  UserProfileLink,\n  UserProfilePage\n} from \"../components/uiComponents\";\nimport { customLinkWrongProps, customPagesIgnoredComponent, customPageWrongProps } from \"../errors\";\nimport { useCustomElementPortal } from \"./useCustomElementPortal\";\nconst isThatComponent = (v, component) => {\n  return !!v && React.isValidElement(v) && (v == null ? void 0 : v.type) === component;\n};\nconst useUserProfileCustomPages = (children) => {\n  const reorderItemsLabels = [\"account\", \"security\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: UserProfileLink,\n    PageComponent: UserProfilePage,\n    componentName: \"UserProfile\"\n  });\n};\nconst useOrganizationProfileCustomPages = (children) => {\n  const reorderItemsLabels = [\"members\", \"settings\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: OrganizationProfileLink,\n    PageComponent: OrganizationProfilePage,\n    componentName: \"OrganizationProfile\"\n  });\n};\nconst useCustomPages = ({\n  children,\n  LinkComponent,\n  PageComponent,\n  reorderItemsLabels,\n  componentName\n}) => {\n  const validChildren = [];\n  React.Children.forEach(children, (child) => {\n    if (!isThatComponent(child, PageComponent) && !isThatComponent(child, LinkComponent)) {\n      if (child) {\n        logErrorInDevMode(customPagesIgnoredComponent(componentName));\n      }\n      return;\n    }\n    const { props } = child;\n    const { children: children2, label, url, labelIcon } = props;\n    if (isThatComponent(child, PageComponent)) {\n      if (isReorderItem(props, reorderItemsLabels)) {\n        validChildren.push({ label });\n      } else if (isCustomPage(props)) {\n        validChildren.push({ label, labelIcon, children: children2, url });\n      } else {\n        logErrorInDevMode(customPageWrongProps(componentName));\n        return;\n      }\n    }\n    if (isThatComponent(child, LinkComponent)) {\n      if (isExternalLink(props)) {\n        validChildren.push({ label, labelIcon, url });\n      } else {\n        logErrorInDevMode(customLinkWrongProps(componentName));\n        return;\n      }\n    }\n  });\n  const customPageContents = [];\n  const customPageLabelIcons = [];\n  const customLinkLabelIcons = [];\n  validChildren.forEach((cp, index) => {\n    if (isCustomPage(cp)) {\n      customPageContents.push({ component: cp.children, id: index });\n      customPageLabelIcons.push({ component: cp.labelIcon, id: index });\n      return;\n    }\n    if (isExternalLink(cp)) {\n      customLinkLabelIcons.push({ component: cp.labelIcon, id: index });\n    }\n  });\n  const customPageContentsPortals = useCustomElementPortal(customPageContents);\n  const customPageLabelIconsPortals = useCustomElementPortal(customPageLabelIcons);\n  const customLinkLabelIconsPortals = useCustomElementPortal(customLinkLabelIcons);\n  const customPages = [];\n  const customPagesPortals = [];\n  validChildren.forEach((cp, index) => {\n    if (isReorderItem(cp, reorderItemsLabels)) {\n      customPages.push({ label: cp.label });\n      return;\n    }\n    if (isCustomPage(cp)) {\n      const {\n        portal: contentPortal,\n        mount,\n        unmount\n      } = customPageContentsPortals.find((p) => p.id === index);\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customPageLabelIconsPortals.find((p) => p.id === index);\n      customPages.push({ label: cp.label, url: cp.url, mount, unmount, mountIcon, unmountIcon });\n      customPagesPortals.push(contentPortal);\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n    if (isExternalLink(cp)) {\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customLinkLabelIconsPortals.find((p) => p.id === index);\n      customPages.push({ label: cp.label, url: cp.url, mountIcon, unmountIcon });\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n  });\n  return { customPages, customPagesPortals };\n};\nconst isReorderItem = (childProps, validItems) => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !url && !labelIcon && validItems.some((v) => v === label);\n};\nconst isCustomPage = (childProps) => {\n  const { children, label, url, labelIcon } = childProps;\n  return !!children && !!url && !!labelIcon && !!label;\n};\nconst isExternalLink = (childProps) => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !!url && !!labelIcon && !!label;\n};\nexport {\n  useOrganizationProfileCustomPages,\n  useUserProfileCustomPages\n};\n//# sourceMappingURL=useCustomPages.js.map","import \"../chunk-XTU7I5IS.js\";\nimport { useUserContext } from \"../contexts/UserContext\";\nfunction useUser() {\n  const user = useUserContext();\n  if (user === void 0) {\n    return { isLoaded: false, isSignedIn: void 0, user: void 0 };\n  }\n  if (user === null) {\n    return { isLoaded: true, isSignedIn: false, user: null };\n  }\n  return { isLoaded: true, isSignedIn: true, user };\n}\nexport {\n  useUser\n};\n//# sourceMappingURL=useUser.js.map","import \"../chunk-XTU7I5IS.js\";\nimport React from \"react\";\nimport { useAuthContext } from \"../contexts/AuthContext\";\nimport { useIsomorphicClerkContext } from \"../contexts/IsomorphicClerkContext\";\nimport { useSessionContext } from \"../contexts/SessionContext\";\nimport { LoadedGuarantee } from \"../contexts/StructureContext\";\nimport { useAuth } from \"../hooks\";\nimport { withClerk } from \"./withClerk\";\nconst SignedIn = ({ children }) => {\n  const { userId } = useAuthContext();\n  if (userId) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return null;\n};\nconst SignedOut = ({ children }) => {\n  const { userId } = useAuthContext();\n  if (userId === null) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return null;\n};\nconst ClerkLoaded = ({ children }) => {\n  const isomorphicClerk = useIsomorphicClerkContext();\n  if (!isomorphicClerk.loaded) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(LoadedGuarantee, null, children);\n};\nconst ClerkLoading = ({ children }) => {\n  const isomorphicClerk = useIsomorphicClerkContext();\n  if (isomorphicClerk.loaded) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\nconst Protect = ({ children, fallback, ...restAuthorizedParams }) => {\n  const { isLoaded, has, userId } = useAuth();\n  if (!isLoaded) {\n    return null;\n  }\n  const unauthorized = /* @__PURE__ */ React.createElement(React.Fragment, null, fallback != null ? fallback : null);\n  const authorized = /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  if (!userId) {\n    return unauthorized;\n  }\n  if (typeof restAuthorizedParams.condition === \"function\") {\n    if (restAuthorizedParams.condition(has)) {\n      return authorized;\n    }\n    return unauthorized;\n  }\n  if (restAuthorizedParams.role || restAuthorizedParams.permission) {\n    if (has(restAuthorizedParams)) {\n      return authorized;\n    }\n    return unauthorized;\n  }\n  return authorized;\n};\nconst RedirectToSignIn = withClerk(({ clerk, ...props }) => {\n  const { client, session } = clerk;\n  const { __unstable__environment } = clerk;\n  const hasActiveSessions = client.activeSessions && client.activeSessions.length > 0;\n  React.useEffect(() => {\n    if (session === null && hasActiveSessions && __unstable__environment) {\n      const { afterSignOutOneUrl } = __unstable__environment.displayConfig;\n      void clerk.navigate(afterSignOutOneUrl);\n    } else {\n      void clerk.redirectToSignIn(props);\n    }\n  }, []);\n  return null;\n}, \"RedirectToSignIn\");\nconst RedirectToSignUp = withClerk(({ clerk, ...props }) => {\n  React.useEffect(() => {\n    void clerk.redirectToSignUp(props);\n  }, []);\n  return null;\n}, \"RedirectToSignUp\");\nconst RedirectToUserProfile = withClerk(({ clerk }) => {\n  React.useEffect(() => {\n    clerk.redirectToUserProfile();\n  }, []);\n  return null;\n}, \"RedirectToUserProfile\");\nconst RedirectToOrganizationProfile = withClerk(({ clerk }) => {\n  React.useEffect(() => {\n    clerk.redirectToOrganizationProfile();\n  }, []);\n  return null;\n}, \"RedirectToOrganizationProfile\");\nconst RedirectToCreateOrganization = withClerk(({ clerk }) => {\n  React.useEffect(() => {\n    clerk.redirectToCreateOrganization();\n  }, []);\n  return null;\n}, \"RedirectToCreateOrganization\");\nconst AuthenticateWithRedirectCallback = withClerk(\n  ({ clerk, ...handleRedirectCallbackParams }) => {\n    React.useEffect(() => {\n      void clerk.handleRedirectCallback(handleRedirectCallbackParams);\n    }, []);\n    return null;\n  },\n  \"AuthenticateWithRedirectCallback\"\n);\nconst MultisessionAppSupport = ({ children }) => {\n  const session = useSessionContext();\n  return /* @__PURE__ */ React.createElement(React.Fragment, { key: session ? session.id : \"no-users\" }, children);\n};\nexport {\n  AuthenticateWithRedirectCallback,\n  ClerkLoaded,\n  ClerkLoading,\n  MultisessionAppSupport,\n  Protect,\n  RedirectToCreateOrganization,\n  RedirectToOrganizationProfile,\n  RedirectToSignIn,\n  RedirectToSignUp,\n  RedirectToUserProfile,\n  SignedIn,\n  SignedOut\n};\n//# sourceMappingURL=controlComponents.js.map","import \"../chunk-XTU7I5IS.js\";\nimport React from \"react\";\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from \"../utils\";\nimport { withClerk } from \"./withClerk\";\nconst SignInButton = withClerk(({ clerk, children, ...props }) => {\n  const { afterSignInUrl, afterSignUpUrl, redirectUrl, mode, ...rest } = props;\n  children = normalizeWithDefaultValue(children, \"Sign in\");\n  const child = assertSingleChild(children)(\"SignInButton\");\n  const clickHandler = () => {\n    const opts = { afterSignInUrl, afterSignUpUrl, redirectUrl };\n    if (mode === \"modal\") {\n      return clerk.openSignIn(opts);\n    }\n    return clerk.redirectToSignIn(opts);\n  };\n  const wrappedChildClickHandler = async (e) => {\n    await safeExecute(child.props.onClick)(e);\n    return clickHandler();\n  };\n  const childProps = { ...rest, onClick: wrappedChildClickHandler };\n  return React.cloneElement(child, childProps);\n}, \"SignInButton\");\nexport {\n  SignInButton\n};\n//# sourceMappingURL=SignInButton.js.map","export type Province =\n  | 'AB' | 'BC' | 'MB' | 'NB' | 'NL' | 'NS' | 'NT' | 'NU' | 'ON' | 'PE' | 'QC' | 'SK' | 'YT'\n\nexport const PROVINCES: Province[] = ['AB','BC','MB','NB','NL','NS','NT','NU','ON','PE','QC','SK','YT']\n\nexport type RateKind = 'HST' | 'GST_PST' | 'GST_QST' | 'GST_ONLY'\n\nexport type Rates = {\n  kind: RateKind\n  gst: number\n  hst?: number\n  pst?: number\n  qst?: number\n}\n\nexport const TAX_RATES: Record<Province, Rates> = {\n  AB: { kind: 'GST_ONLY', gst: 0.05 },\n  BC: { kind: 'GST_PST', gst: 0.05, pst: 0.07 },\n  MB: { kind: 'GST_PST', gst: 0.05, pst: 0.07 },\n  NB: { kind: 'HST', gst: 0.05, hst: 0.15 },\n  NL: { kind: 'HST', gst: 0.05, hst: 0.15 },\n  NS: { kind: 'HST', gst: 0.05, hst: 0.15 },\n  NT: { kind: 'GST_ONLY', gst: 0.05 },\n  NU: { kind: 'GST_ONLY', gst: 0.05 },\n  ON: { kind: 'HST', gst: 0.05, hst: 0.13 },\n  PE: { kind: 'HST', gst: 0.05, hst: 0.15 },\n  QC: { kind: 'GST_QST', gst: 0.05, qst: 0.09975 },\n  SK: { kind: 'GST_PST', gst: 0.05, pst: 0.06 },\n  YT: { kind: 'GST_ONLY', gst: 0.05 }\n}\n\nexport type Category =\n  | 'Standard' | 'Exempt' | 'Zero-rated (basic groceries)'\n  | 'Prepared food / restaurant' | \"Children's clothing & footwear\"\n  | \"Children's diapers\" | \"Children's car seats & booster seats\"\n  | 'Feminine hygiene products' | 'Prescription drugs / medical'\n  | 'Printed books (qualifying)' | 'Newspapers (qualifying)'\n  | 'Public transit fares' | 'Snack foods / candy' | 'Sweetened carbonated beverages'\n  | 'Cannabis (medical)' | 'Cannabis (non-medical)'\n  | 'Tobacco / alcohol' | 'GST only' | 'Provincial only'\n\nexport const CATEGORY_OPTIONS: Category[] = [\n  'Standard','Exempt','Zero-rated (basic groceries)','Prepared food / restaurant',\n  \"Children's clothing & footwear\",\"Children's diapers\",\"Children's car seats & booster seats\",\n  'Feminine hygiene products','Prescription drugs / medical','Printed books (qualifying)',\n  'Newspapers (qualifying)','Public transit fares','Snack foods / candy','Sweetened carbonated beverages',\n  'Cannabis (medical)','Cannabis (non-medical)','Tobacco / alcohol','GST only','Provincial only'\n]\n\nexport const DEFAULT_PROVINCE: Province = 'BC'\n\nexport function getProvincialLabel(kind: RateKind): string {\n  switch (kind) {\n    case 'HST':\n      return 'HST'\n    case 'GST_QST':\n      return 'QST'\n    case 'GST_PST':\n      return 'PST'\n    default:\n      return 'Provincial'\n  }\n}\n\nexport function getProvincialRate(province: Province): number {\n  const entry = TAX_RATES[province]\n  if (entry.kind === 'HST') return entry.hst ?? 0\n  if (entry.kind === 'GST_PST') return entry.pst ?? 0\n  if (entry.kind === 'GST_QST') return entry.qst ?? 0\n  return 0\n}\r\n","import { CATEGORY_OPTIONS, Category, Province, TAX_RATES } from \"./taxData\"\r\n\r\nexport type CategoryFlags = { federal: boolean; provincial: boolean }\r\n\r\nfunction getBaseFlags(category: Category): CategoryFlags {\r\n  switch (category) {\r\n    case 'Exempt':\r\n    case 'Zero-rated (basic groceries)':\r\n    case 'Feminine hygiene products':\r\n    case 'Public transit fares':\r\n    case 'Prescription drugs / medical':\r\n      return { federal: false, provincial: false }\r\n    case 'Printed books (qualifying)':\r\n    case 'Newspapers (qualifying)':\r\n      return { federal: true, provincial: true }\r\n    case 'GST only':\r\n      return { federal: true, provincial: false }\r\n    case 'Provincial only':\r\n      return { federal: false, provincial: true }\r\n    default:\r\n      return { federal: true, provincial: true }\r\n  }\r\n}\r\n\r\nfunction applyProvinceOverrides(\r\n  amount: number,\r\n  province: Province,\r\n  category: Category,\r\n  flags: CategoryFlags,\r\n): CategoryFlags {\r\n  let { federal, provincial } = flags\r\n\r\n  switch (category) {\r\n    case \"Children's clothing & footwear\": {\r\n      if (['ON', 'NS', 'PE'].includes(province)) provincial = false\r\n      if (province === 'BC') provincial = false\r\n      if (province === 'MB') provincial = amount <= 150 ? false : true // up to $150 RST-exempt\r\n      break\r\n    }\r\n    case \"Children's diapers\": {\r\n      if (['ON', 'NS'].includes(province)) provincial = false\r\n      if (['BC', 'MB', 'SK', 'QC'].includes(province)) provincial = false\r\n      break\r\n    }\r\n    case \"Children's car seats & booster seats\": {\r\n      if (['ON', 'BC', 'MB'].includes(province)) provincial = false\r\n      break\r\n    }\r\n    case 'Prepared food / restaurant': {\r\n      if (province === 'ON' && amount <= 4) provincial = false\r\n      if (province === 'BC') provincial = false\r\n      if (['MB', 'SK'].includes(province)) provincial = true\r\n      break\r\n    }\r\n    case 'Sweetened carbonated beverages': {\r\n      if (['BC', 'MB', 'SK'].includes(province)) provincial = true\r\n      break\r\n    }\r\n    case 'Snack foods / candy': {\r\n      if (province === 'BC') provincial = false\r\n      if (['MB', 'SK'].includes(province)) provincial = true\r\n      break\r\n    }\r\n    case 'Printed books (qualifying)': {\r\n      if (['ON', 'NS', 'NB', 'NL', 'PE'].includes(province)) provincial = false\r\n      if (['BC', 'MB', 'SK', 'QC'].includes(province)) provincial = false\r\n      break\r\n    }\r\n    case 'Newspapers (qualifying)': {\r\n      if (['ON', 'BC'].includes(province)) provincial = false\r\n      break\r\n    }\r\n    default:\r\n      break\r\n  }\r\n\r\n  return { federal, provincial }\r\n}\r\n\r\nexport type LineItemInput = { amount: number; category: Category }\r\n\r\nexport type LineBreakdown = {\r\n  amount: number\r\n  federalTax: number\r\n  provincialTax: number\r\n  hstTax: number\r\n  totalTax: number\r\n  grandTotal: number\r\n}\r\n\r\nexport const ZERO_BREAKDOWN: LineBreakdown = {\r\n  amount: 0,\r\n  federalTax: 0,\r\n  provincialTax: 0,\r\n  hstTax: 0,\r\n  totalTax: 0,\r\n  grandTotal: 0,\r\n}\r\n\r\nexport function calculateLine(\r\n  item: LineItemInput,\r\n  province: Province,\r\n): LineBreakdown {\r\n  const amount = Number.isFinite(item.amount) ? Math.max(item.amount, 0) : 0\r\n  const base = getBaseFlags(item.category)\r\n  const { federal, provincial } = applyProvinceOverrides(amount, province, item.category, base)\r\n  const rates = TAX_RATES[province]\r\n\r\n  let federalTax = 0\r\n  let provincialTax = 0\r\n  let hstTax = 0\r\n\r\n  if (rates.kind === 'HST') {\r\n    if (federal && provincial) hstTax = amount * (rates.hst ?? 0)\r\n    else if (federal && !provincial) federalTax = amount * rates.gst\r\n    else if (!federal && provincial) provincialTax = amount * ((rates.hst ?? 0) - rates.gst)\r\n  } else if (rates.kind === 'GST_PST') {\r\n    if (federal) federalTax = amount * rates.gst\r\n    if (provincial) provincialTax = amount * (rates.pst ?? 0)\r\n  } else if (rates.kind === 'GST_QST') {\r\n    if (federal) federalTax = amount * rates.gst\r\n    if (provincial) provincialTax = amount * (rates.qst ?? 0)\r\n  } else {\r\n    if (federal) federalTax = amount * rates.gst\r\n  }\r\n\r\n  const totalTax = federalTax + provincialTax + hstTax\r\n  return {\r\n    amount,\r\n    federalTax,\r\n    provincialTax,\r\n    hstTax,\r\n    totalTax,\r\n    grandTotal: amount + totalTax,\r\n  }\r\n}\r\n\r\nexport type Totals = {\r\n  subTotal: number\r\n  federal: number\r\n  provincial: number\r\n  hst: number\r\n  tax: number\r\n  grandTotal: number\r\n}\r\n\r\nexport function aggregate(lines: LineBreakdown[]): Totals {\r\n  return lines.reduce<Totals>(\r\n    (acc, current) => ({\r\n      subTotal: acc.subTotal + current.amount,\r\n      federal: acc.federal + current.federalTax,\r\n      provincial: acc.provincial + current.provincialTax,\r\n      hst: acc.hst + current.hstTax,\r\n      tax: acc.tax + current.totalTax,\r\n      grandTotal: acc.grandTotal + current.grandTotal,\r\n    }),\r\n    { subTotal: 0, federal: 0, provincial: 0, hst: 0, tax: 0, grandTotal: 0 },\r\n  )\r\n}\r\n\r\nexport function calculateTotals(items: LineItemInput[], province: Province) {\r\n  const lines = items.map((item) => calculateLine(item, province))\r\n  return { lines, totals: aggregate(lines) }\r\n}\r\n\r\nexport function validateCategory(value: string): Category {\r\n  return (CATEGORY_OPTIONS.includes(value as Category) ? value : 'Standard') as Category\r\n}\r\n","import { Category, Province } from \"./taxData\"\r\nimport { validateCategory } from \"./taxCalculator\"\r\n\r\nexport type ShareableLineItem = {\r\n  label: string\r\n  category: Category\r\n  amount: string\r\n}\r\n\r\nexport type ShareableState = {\r\n  province: Province\r\n  items: ShareableLineItem[]\r\n}\r\n\r\nconst HASH_KEY = 'state'\r\n\r\nfunction encodePayload(payload: string) {\r\n  if (typeof btoa === 'function') {\r\n    return btoa(payload)\r\n  }\r\n  return payload\r\n}\r\n\r\nfunction decodePayload(raw: string) {\r\n  if (typeof atob === 'function') {\r\n    return atob(raw)\r\n  }\r\n  return raw\r\n}\r\n\r\nexport function encodeState(state: ShareableState): string {\r\n  const payload = JSON.stringify(state)\r\n  const encoded = encodeURIComponent(encodePayload(payload))\r\n  return `${HASH_KEY}=${encoded}`\r\n}\r\n\r\nexport function decodeState(fragment: string): ShareableState | null {\r\n  if (!fragment.startsWith(`${HASH_KEY}=`)) return null\r\n  const raw = fragment.slice(HASH_KEY.length + 1)\r\n  try {\r\n    const decoded = decodePayload(decodeURIComponent(raw))\r\n    const parsed = JSON.parse(decoded)\r\n    if (!parsed || typeof parsed !== 'object') return null\r\n\r\n    const province = parsed.province as Province | undefined\r\n    const itemsInput = Array.isArray(parsed.items) ? parsed.items : []\r\n\r\n    if (!province) return null\r\n\r\n    const items: ShareableLineItem[] = itemsInput.map((entry: any, index: number) => ({\r\n      label:\r\n        typeof entry?.label === 'string' && entry.label.trim() ? entry.label : `Item ${index + 1}`,\r\n      category: validateCategory(entry?.category),\r\n      amount:\r\n        typeof entry?.amount === 'string' || typeof entry?.amount === 'number'\r\n          ? String(entry.amount)\r\n          : '0',\r\n    }))\r\n\r\n    return { province, items }\r\n  } catch (error) {\r\n    console.warn('Failed to decode share state', error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport function extractStateFromHash(hash: string): ShareableState | null {\r\n  if (!hash) return null\r\n  const fragment = hash.replace(/^#/, '')\r\n  const segments = fragment.split('&')\r\n  for (const segment of segments) {\r\n    const result = decodeState(segment)\r\n    if (result) return result\r\n  }\r\n  return null\r\n}\r\n","import React from 'react'\n\nexport type ThemeMode = 'light' | 'dark'\n\nconst STORAGE_KEY = 'tax-smart-theme'\n\nfunction isBrowser() {\n  return typeof window !== 'undefined' && typeof document !== 'undefined'\n}\n\nfunction readStoredTheme(): ThemeMode | null {\n  if (!isBrowser()) return null\n  const stored = window.localStorage.getItem(STORAGE_KEY)\n  return stored === 'light' || stored === 'dark' ? stored : null\n}\n\nfunction applyThemeToDom(theme: ThemeMode) {\n  if (!isBrowser()) return\n  const root = document.documentElement\n  root.classList.toggle('dark', theme === 'dark')\n  root.setAttribute('data-theme', theme)\n  root.style.setProperty('color-scheme', theme)\n}\n\nexport function useDarkMode(defaultMode: ThemeMode = 'dark') {\n  const [theme, setTheme] = React.useState<ThemeMode>(() => {\n    const initial = readStoredTheme() ?? defaultMode\n    applyThemeToDom(initial)\n    return initial\n  })\n\n  React.useEffect(() => {\n    applyThemeToDom(theme)\n    if (isBrowser()) {\n      window.localStorage.setItem(STORAGE_KEY, theme)\n    }\n  }, [theme])\n\n  React.useEffect(() => {\n    if (!isBrowser()) return\n    const media = window.matchMedia('(prefers-color-scheme: dark)')\n    const listener = (event: MediaQueryListEvent) => {\n      setTheme((current) => readStoredTheme() ?? (event.matches ? 'dark' : 'light'))\n    }\n    media.addEventListener('change', listener)\n    return () => media.removeEventListener('change', listener)\n  }, [])\n\n  const toggleTheme = React.useCallback(() => {\n    setTheme((mode) => (mode === 'dark' ? 'light' : 'dark'))\n  }, [])\n\n  return { theme, setTheme, toggleTheme }\n}\r\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Crown = createLucideIcon(\"Crown\", [\n  [\"path\", { d: \"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14\", key: \"zkxr6b\" }]\n]);\n\nexport { Crown as default };\n//# sourceMappingURL=crown.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.4.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import { loadStripe } from '@stripe/stripe-js';\n\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY);\n\nif (!import.meta.env.VITE_STRIPE_PUBLISHABLE_KEY) {\n  console.warn('Stripe publishable key is not set. Please add VITE_STRIPE_PUBLISHABLE_KEY to your .env file');\n}\n\nexport const STRIPE_PLANS = {\n  PRO_MONTHLY: 'pro_monthly',\n  PRO_YEARLY: 'pro_yearly',\n} as const;\n\nexport const STRIPE_PRICE_IDS = {\n  PRO_MONTHLY: process.env.VITE_STRIPE_MONTHLY_PRICE_ID || 'price_your_monthly_price_id_here',\n  PRO_YEARLY: process.env.VITE_STRIPE_YEARLY_PRICE_ID || 'price_your_yearly_price_id_here',\n} as const;\n\nexport async function openCheckout(planId: string, userId: string, email: string) {\n  if (!stripePromise) {\n    console.error('Stripe failed to initialize');\n    return;\n  }\n\n  try {\n    // Create a checkout session on the server\n    const response = await fetch('/api/create-checkout-session', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        priceId: planId,\n        userId,\n        email,\n        successUrl: `${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,\n        cancelUrl: `${window.location.origin}/pricing`,\n      }),\n    });\n\n    const session = await response.json();\n\n    if (session.error) {\n      console.error('Error creating checkout session:', session.error);\n      return;\n    }\n\n    // When the customer clicks on the button, redirect them to Checkout.\n    const stripe = await stripePromise;\n    if (stripe) {\n      const { error } = await stripe.redirectToCheckout({\n        sessionId: session.id,\n      });\n\n      if (error) {\n        console.error('Error redirecting to checkout:', error);\n      }\n    } else {\n      console.error('Stripe failed to initialize');\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}\n","import { useState } from 'react'\nimport { useUser } from '@clerk/clerk-react'\nimport { X, Check, Crown, Zap } from 'lucide-react'\nimport { openCheckout, STRIPE_PRICE_IDS } from '../lib/billing'\n\ninterface PricingModalProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function PricingModal({ isOpen, onClose }: PricingModalProps) {\n  const { user } = useUser()\n  const [isLoading, setIsLoading] = useState(false)\n\n  if (!isOpen) return null\n\n  const handleUpgrade = async (variantId: string) => {\n    if (!user) return\n    \n    setIsLoading(true)\n    try {\n      openCheckout(variantId, user.id, user.primaryEmailAddress?.emailAddress || '')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              Upgrade to Pro\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-6\">\n            {/* Free Plan */}\n            <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-6\">\n              <div className=\"text-center mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Free\n                </h3>\n                <div className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n                  $0\n                  <span className=\"text-sm font-normal text-gray-500\">/month</span>\n                </div>\n              </div>\n              \n              <ul className=\"space-y-3 mb-6\">\n                <li className=\"flex items-center gap-2\">\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    Up to 5 line items\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    Single province calculations\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    Public share links (24h)\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    All tax categories\n                  </span>\n                </li>\n              </ul>\n              \n              <div className=\"text-center\">\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  Current Plan\n                </div>\n              </div>\n            </div>\n\n            {/* Pro Plan */}\n            <div className=\"border-2 border-amber-500 rounded-lg p-6 relative\">\n              <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2\">\n                <span className=\"bg-amber-500 text-white px-3 py-1 rounded-full text-xs font-medium\">\n                  Most Popular\n                </span>\n              </div>\n              \n              <div className=\"text-center mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center justify-center gap-2\">\n                  <Crown className=\"h-5 w-5 text-amber-500\" />\n                  Pro\n                </h3>\n                <div className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n                  $9\n                  <span className=\"text-sm font-normal text-gray-500\">/month</span>\n                </div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                  or $90/year (save 17%)\n                </div>\n              </div>\n              \n              <ul className=\"space-y-3 mb-6\">\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Unlimited</strong> line items\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Multi-province</strong> comparison\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>CSV & PDF</strong> export\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Private</strong> share links\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Saved</strong> calculations\n                  </span>\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <Zap className=\"h-4 w-4 text-amber-500\" />\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">\n                    <strong>Priority</strong> support\n                  </span>\n                </li>\n              </ul>\n              \n              <div className=\"space-y-3\">\n                <button\n                  onClick={() => handleUpgrade(STRIPE_PRICE_IDS.PRO_MONTHLY)}\n                  disabled={isLoading}\n                  className=\"w-full bg-amber-500 hover:bg-amber-600 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center gap-2 transition-colors disabled:opacity-50\"\n                >\n                  {isLoading ? 'Loading...' : 'Upgrade Monthly'}\n                </button>\n                <button\n                  onClick={() => handleUpgrade(STRIPE_PRICE_IDS.PRO_YEARLY)}\n                  disabled={isLoading}\n                  className=\"w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50\"\n                >\n                  {isLoading ? 'Loading...' : 'Upgrade Yearly (Save 17%)'}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-8 text-center text-sm text-gray-500 dark:text-gray-400\">\n            <p>✓ Cancel anytime • ✓ 30-day money-back guarantee • ✓ Secure checkout</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport {\n  CATEGORY_OPTIONS,\n  Category,\n  DEFAULT_PROVINCE,\n  PROVINCES,\n  Province,\n  TAX_RATES,\n  getProvincialLabel,\n  getProvincialRate,\n} from \"../../lib/taxData\"\nimport { LineItemInput, calculateTotals, validateCategory } from \"../../lib/taxCalculator\"\nimport { encodeState, extractStateFromHash } from \"../../lib/share\"\nimport { useDarkMode } from \"../../hooks/useDarkMode\"\nimport { SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/clerk-react'\nimport { Crown } from 'lucide-react'\nimport \"./TaxSmartCalculator.css\"\n\ntype LineItemForm = {\n  id: string\n  label: string\n  category: Category\n  amount: string\n}\n\nconst CURRENCY = new Intl.NumberFormat('en-CA', { style: 'currency', currency: 'CAD' })\n\nfunction createLineItem(index: number, overrides: Partial<LineItemForm> = {}): LineItemForm {\n  return {\n    id: crypto.randomUUID(),\n    label: overrides.label ?? `Item ${index}`,\n    category: overrides.category ?? 'Standard',\n    amount: overrides.amount ?? '0',\n  }\n}\n\nfunction parseAmount(value: string): number {\n  if (!value) return 0\n  const numeric = Number.parseFloat(value)\n  return Number.isFinite(numeric) && numeric > 0 ? numeric : 0\n}\n\nfunction formatCurrency(value: number) {\n  return CURRENCY.format(value)\n}\n\nasync function copyToClipboard(value: string) {\n  if (typeof navigator !== 'undefined' && navigator.clipboard?.writeText) {\n    try {\n      await navigator.clipboard.writeText(value)\n      return true\n    } catch (error) {\n      console.warn('Clipboard write failed', error)\n      return false\n    }\n  }\n  return false\n}\n\nfunction toShareableItems(items: LineItemForm[]) {\n  return items.map(({ label, category, amount }) => ({\n    label,\n    category,\n    amount,\n  }))\n}\n\n// Import the existing PricingModal component\nimport { PricingModal } from '../PricingModal';\n\nexport default function TaxSmartCalculator() {\n  const { theme, toggleTheme } = useDarkMode('dark');\n  const [showUpgradeModal, setShowUpgradeModal] = React.useState(false);\n  const [province, setProvince] = React.useState<Province>(DEFAULT_PROVINCE)\n  const [items, setItems] = React.useState<LineItemForm[]>([createLineItem(1)])\n  const [notice, setNotice] = React.useState<string | null>(null)\n  const [resultsVersion, setResultsVersion] = React.useState(0)\n\n  const numericItems = React.useMemo<LineItemInput[]>(\n    () => items.map((item) => ({ amount: parseAmount(item.amount), category: item.category })),\n    [items],\n  )\n\n  const { totals } = React.useMemo(() => calculateTotals(numericItems, province), [numericItems, province])\n\n  const provincialLabel = getProvincialLabel(TAX_RATES[province].kind)\n  const provincialRate = getProvincialRate(province)\n\n  const showNotice = React.useCallback((message: string) => {\n    setNotice(message)\n    window.setTimeout(() => setNotice(null), 1800)\n  }, [])\n\n  const handleAddItem = React.useCallback(() => {\n    setItems((current) => [...current, createLineItem(current.length + 1)])\n  }, [])\n\n  const handleRemoveItem = React.useCallback((id: string) => {\n    setItems((current) => (current.length > 1 ? current.filter((item) => item.id !== id) : current))\n  }, [])\n\n  const handleUpdateItem = React.useCallback((id: string, patch: Partial<LineItemForm>) => {\n    setItems((current) => current.map((item) => (item.id === id ? { ...item, ...patch } : item)))\n  }, [])\n\n  const handleCalculate = React.useCallback(() => {\n    setResultsVersion((version) => version + 1)\n    showNotice('Totals refreshed')\n  }, [showNotice])\n\n  const handleCopyTotals = React.useCallback(async () => {\n    const parts = [\n      `Province: ${province}`,\n      `Subtotal: ${formatCurrency(totals.subTotal)}`,\n      TAX_RATES[province].kind === 'HST'\n        ? `HST: ${formatCurrency(totals.hst)}`\n        : `GST: ${formatCurrency(totals.federal)}\\n${provincialLabel}: ${formatCurrency(totals.provincial)}`,\n      `Total tax: ${formatCurrency(totals.tax)}`,\n      `Grand total: ${formatCurrency(totals.grandTotal)}`,\n    ]\n\n    const success = await copyToClipboard(parts.join('\\n'))\n    showNotice(success ? 'Totals copied' : 'Clipboard not available')\n  }, [province, provincialLabel, showNotice, totals])\n\n  const handleCopyShareLink = React.useCallback(async () => {\n    const parts = [\n      `Province: ${province}`,\n      `Subtotal: ${formatCurrency(totals.subTotal)}`,\n      TAX_RATES[province].kind === 'HST'\n        ? `HST: ${formatCurrency(totals.hst)}`\n        : `GST: ${formatCurrency(totals.federal)}\\n${provincialLabel}: ${formatCurrency(totals.provincial)}`,\n      `Total tax: ${formatCurrency(totals.tax)}`,\n      `Grand total: ${formatCurrency(totals.grandTotal)}`,\n    ]\n    const success = await copyToClipboard(parts.join('\\n'))\n    showNotice(success ? 'Results copied to clipboard' : 'Clipboard not available')\n  }, [province, provincialLabel, showNotice, totals])\n\n  const handleCopyAppLink = React.useCallback(async () => {\n    if (typeof window === 'undefined') return\n    const shareUrl = new URL(window.location.href)\n    shareUrl.hash = encodeState({ province, items: toShareableItems(items) })\n    const success = await copyToClipboard(shareUrl.toString())\n    showNotice(success ? 'Shareable link copied' : 'Clipboard not available')\n  }, [items, province, showNotice])\n\n  React.useEffect(() => {\n    if (typeof window === 'undefined') return\n    const state = extractStateFromHash(window.location.hash)\n    if (!state) return\n\n    setProvince(state.province)\n    setItems(\n      state.items.length\n        ? state.items.map((item, index) =>\n            createLineItem(index + 1, {\n              label: item.label,\n              category: validateCategory(item.category),\n              amount: item.amount,\n            })\n          )\n        : [createLineItem(1)],\n    )\n  }, [])\n\n  return (\n    <div className=\"calculator-shell\">\n      <header className=\"calculator-header\">\n        <div className=\"calculator-brand\">\n          <span className=\"calculator-logo\" aria-hidden>CA</span>\n          <div>\n            <p className=\"brand-name\">TaxSmart</p>\n            <p className=\"brand-tagline\">GST / HST / PST & QST in one view</p>\n          </div>\n        </div>\n        <div className=\"header-actions\">\n          <button type=\"button\" className=\"btn whitespace-nowrap\" onClick={handleCopyAppLink}>\n            Share app\n          </button>\n          <button type=\"button\" className=\"btn whitespace-nowrap\" onClick={handleCopyShareLink}>\n            Copy results\n          </button>\n          <button type=\"button\" className=\"btn whitespace-nowrap\" onClick={toggleTheme}>\n            {theme === 'dark' ? 'Light mode' : 'Dark mode'}\n          </button>\n          <button \n            onClick={() => setShowUpgradeModal(true)}\n            className=\"btn whitespace-nowrap bg-gradient-to-r from-amber-400 to-amber-500 text-white border-transparent hover:from-amber-500 hover:to-amber-600 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5\"\n          >\n            <Crown className=\"h-3.5 w-3.5 inline-block mr-1.5\" />\n            <span>Upgrade</span>\n          </button>\n          <SignedOut>\n            <SignInButton mode=\"modal\">\n              <button className=\"btn whitespace-nowrap bg-indigo-600 text-white hover:bg-indigo-700 border-transparent\">\n                Sign in\n              </button>\n            </SignInButton>\n          </SignedOut>\n          <SignedIn>\n            <div className=\"flex-shrink-0\">\n              <UserButton afterSignOutUrl=\"/\" />\n            </div>\n          </SignedIn>\n        </div>\n      </header>\n      \n      <PricingModal \n        isOpen={showUpgradeModal} \n        onClose={() => setShowUpgradeModal(false)} \n      />\n\n      {notice && (\n        <div role=\"status\" className=\"calculator-notice\">\n          {notice}\n        </div>\n      )}\n\n      <main className=\"calculator-main grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <section className=\"panel\">\n          <div className=\"panel-header\">\n            <h1 className=\"panel-title\">Canada sales-tax smart calculator</h1>\n            <span className=\"badge\">Free forever</span>\n          </div>\n          <p className=\"panel-subtitle\">\n            Estimate combined GST, HST, PST, and QST with per-province category rules.\n          </p>\n\n          <div className=\"province-grid\">\n            <article className=\"total-card form-field-card\" aria-labelledby=\"province-select-label\">\n              <label id=\"province-select-label\" className=\"field-label\" htmlFor=\"province-select\">\n                Province / Territory\n              </label>\n              <select\n                id=\"province-select\"\n                className=\"input select\"\n                value={province}\n                onChange={(event) => setProvince(event.target.value as Province)}\n              >\n                {PROVINCES.map((code) => (\n                  <option key={code} value={code}>\n                    {code}\n                  </option>\n                ))}\n              </select>\n            </article>\n            <div className=\"rate-cards\">\n              <div className=\"rate-card\">\n                <p className=\"muted\">Federal (GST)</p>\n                <p className=\"rate-value\">{(TAX_RATES[province].gst * 100).toFixed(1)}%</p>\n              </div>\n              <div className=\"rate-card\">\n                <p className=\"muted\">Provincial ({provincialLabel})</p>\n                <p className=\"rate-value\">{provincialRate ? `${(provincialRate * 100).toFixed(2)}%` : '—'}</p>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"panel\">\n          <div className=\"panel-header\">\n            <h2 className=\"panel-title\">Line items</h2>\n          </div>\n          <div className=\"line-items\">\n            {items.map((item) => (\n              <div key={item.id} className=\"line-item\">\n                <label className=\"sr-only\" htmlFor={`label-${item.id}`}>\n                  Item label\n                </label>\n                <input\n                  id={`label-${item.id}`}\n                  className=\"input\"\n                  value={item.label}\n                  onChange={(event) => handleUpdateItem(item.id, { label: event.target.value })}\n                  placeholder=\"Item label\"\n                />\n                <label className=\"sr-only\" htmlFor={`category-${item.id}`}>\n                  Item category\n                </label>\n                <select\n                  id={`category-${item.id}`}\n                  className=\"input\"\n                  value={item.category}\n                  onChange={(event) => handleUpdateItem(item.id, { category: event.target.value as Category })}\n                >\n                  {CATEGORY_OPTIONS.map((option) => (\n                    <option key={option} value={option}>\n                      {option}\n                    </option>\n                  ))}\n                </select>\n                <label className=\"sr-only\" htmlFor={`amount-${item.id}`}>\n                  Item amount\n                </label>\n                <div className=\"amount-field\">\n                  <span aria-hidden>$</span>\n                  <input\n                    id={`amount-${item.id}`}\n                    className=\"input\"\n                    value={item.amount}\n                    onChange={(event) => handleUpdateItem(item.id, { amount: event.target.value })}\n                    inputMode=\"decimal\"\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                <button\n                  type=\"button\"\n                  className=\"btn icon\"\n                  aria-label=\"Remove line item\"\n                  onClick={() => handleRemoveItem(item.id)}\n                  disabled={items.length === 1}\n                >\n                  ×\n                </button>\n              </div>\n            ))}\n          </div>\n          <div className=\"line-items-actions\">\n            <button type=\"button\" className=\"btn ghost\" onClick={handleAddItem}>\n              + Add item\n            </button>\n          </div>\n        </section>\n\n        <div className=\"panel actions\">\n          <button type=\"button\" className=\"btn primary\" onClick={handleCalculate}>\n            Calculate tax\n          </button>\n        </div>\n\n        <section key={resultsVersion} className=\"panel\">\n          <div className=\"panel-header\">\n            <h2 className=\"panel-title\">Totals</h2>\n            <div className=\"header-actions\">\n              <button type=\"button\" className=\"btn\" onClick={handleCopyTotals}>\n                Copy totals\n              </button>\n              <button type=\"button\" className=\"btn\" onClick={handleCopyShareLink}>\n                Share link\n              </button>\n            </div>\n          </div>\n          <div className=\"totals-grid\">\n            <article className=\"total-card\">\n              <p className=\"muted\">Subtotal</p>\n              <p className=\"total-value\">{formatCurrency(totals.subTotal)}</p>\n            </article>\n            {TAX_RATES[province].kind === 'HST' ? (\n              <article className=\"total-card\">\n                <p className=\"muted\">HST</p>\n                <p className=\"total-value\">{formatCurrency(totals.hst)}</p>\n              </article>\n            ) : (\n              <>\n                <article className=\"total-card\">\n                  <p className=\"muted\">GST</p>\n                  <p className=\"total-value\">{formatCurrency(totals.federal)}</p>\n                </article>\n                <article className=\"total-card\">\n                  <p className=\"muted\">{provincialLabel}</p>\n                  <p className=\"total-value\">{formatCurrency(totals.provincial)}</p>\n                </article>\n              </>\n            )}\n            <article className=\"total-card\">\n              <p className=\"muted\">Total tax</p>\n              <p className=\"total-value\">{formatCurrency(totals.tax)}</p>\n            </article>\n            <article className=\"total-card highlight\">\n              <p className=\"muted\">Grand total</p>\n              <p className=\"total-value\">{formatCurrency(totals.grandTotal)}</p>\n            </article>\n          </div>\n        </section>\n\n        <section className=\"panel\">\n          <h2 className=\"panel-title\">References</h2>\n          <ul className=\"reference-list\">\n            <li>\n              <a href=\"https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/gst-hst-businesses/charge-collect-type-supply.html\" target=\"_blank\" rel=\"noreferrer\">\n                CRA: Charge & collect GST/HST by type of supply\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-063.html\" target=\"_blank\" rel=\"noreferrer\">\n                CRA GI-063: Ontario point-of-sale rebates (children's goods, books, diapers, car seats)\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-060.html\" target=\"_blank\" rel=\"noreferrer\">\n                CRA GI-060: Ontario point-of-sale rebate on newspapers\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst\" target=\"_blank\" rel=\"noreferrer\">\n                BC PST overview & exemptions\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst/ice-cream-sweetened-beverages\" target=\"_blank\" rel=\"noreferrer\">\n                BC PST: Sweetened carbonated beverages\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.gov.mb.ca/finance/taxation/taxes/retail.html\" target=\"_blank\" rel=\"noreferrer\">\n                Manitoba RST exemptions (incl. children's clothing)\n              </a>\n            </li>\n            <li>\n              <a href=\"https://www.revenuquebec.ca/en/\" target=\"_blank\" rel=\"noreferrer\">\r\n                Revenu Québec: QST exemptions (books, baby products)\r\n              </a>\r\n            </li>\r\n          </ul>\r\n          <p className=\"muted\">\r\n            Excise duties or deposits on alcohol, tobacco, cannabis, and containers are not included.\r\n          </p>\r\n        </section>\r\n      </main>\r\n\r\n      <footer className=\"calculator-footer\">\r\n        Built for Canadians. Totally free. No ads.\r\n      </footer>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":["assertSingleChild","children","name","React","multipleChildrenInButtonComponent","normalizeWithDefaultValue","defaultText","safeExecute","cb","args","useCustomElementPortal","elements","initialState","nodes","setNodes","useState","el","index","node","prevState","n","i","createPortal","logErrorInDevMode","message","isDevelopmentEnvironment","withClerk","Component","displayName","HOC","props","clerk","useIsomorphicClerkContext","LoadedGuarantee","isMountProps","isOpenProps","Portal","prevProps","_a","_b","_c","_d","portal","createElement","UserProfilePage","userProfilePageRenderedError","UserProfileLink","userProfileLinkRenderedError","_UserProfile","customPages","customPagesPortals","useUserProfileCustomPages","_UserButton","userProfileProps","UserButton","OrganizationProfilePage","organizationProfilePageRenderedError","OrganizationProfileLink","organizationProfileLinkRenderedError","_OrganizationProfile","useOrganizationProfileCustomPages","_OrganizationSwitcher","organizationProfileProps","isThatComponent","v","component","useCustomPages","LinkComponent","PageComponent","reorderItemsLabels","componentName","validChildren","child","customPagesIgnoredComponent","children2","label","url","labelIcon","isReorderItem","isCustomPage","customPageWrongProps","isExternalLink","customLinkWrongProps","customPageContents","customPageLabelIcons","customLinkLabelIcons","cp","customPageContentsPortals","customPageLabelIconsPortals","customLinkLabelIconsPortals","contentPortal","mount","unmount","p","labelPortal","mountIcon","unmountIcon","childProps","validItems","useUser","user","useUserContext","SignedIn","userId","useAuthContext","SignedOut","client","session","__unstable__environment","hasActiveSessions","afterSignOutOneUrl","handleRedirectCallbackParams","SignInButton","afterSignInUrl","afterSignUpUrl","redirectUrl","mode","rest","clickHandler","opts","e","PROVINCES","TAX_RATES","CATEGORY_OPTIONS","DEFAULT_PROVINCE","getProvincialLabel","kind","getProvincialRate","province","entry","getBaseFlags","category","applyProvinceOverrides","amount","flags","federal","provincial","calculateLine","item","base","rates","federalTax","provincialTax","hstTax","totalTax","aggregate","lines","acc","current","calculateTotals","items","validateCategory","value","HASH_KEY","encodePayload","payload","decodePayload","raw","encodeState","state","encoded","decodeState","fragment","decoded","parsed","itemsInput","error","extractStateFromHash","hash","segments","segment","result","STORAGE_KEY","isBrowser","readStoredTheme","stored","applyThemeToDom","theme","root","useDarkMode","defaultMode","setTheme","initial","media","listener","event","toggleTheme","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","ref","tag","attrs","Check","Crown","X","Zap","V3_URL","V3_URL_REGEX","findScript","scripts","script","injectScript","params","queryString","headOrBody","registerWrapper","stripe","startTime","stripePromise","onErrorListener","onLoadListener","onError","reject","onLoad","resolve","loadScript","_script$parentNode","initStripe","maybeStripe","stripePromise$1","loadCalled","getStripePromise","loadStripe","_len","_key","STRIPE_PRICE_IDS","define_process_env_default","openCheckout","planId","email","PricingModal","isOpen","onClose","isLoading","setIsLoading","handleUpgrade","variantId","jsx","jsxs","CURRENCY","createLineItem","overrides","parseAmount","numeric","formatCurrency","copyToClipboard","toShareableItems","TaxSmartCalculator","showUpgradeModal","setShowUpgradeModal","setProvince","setItems","notice","setNotice","resultsVersion","setResultsVersion","numericItems","totals","provincialLabel","provincialRate","showNotice","handleAddItem","handleRemoveItem","id","handleUpdateItem","patch","handleCalculate","version","handleCopyTotals","parts","success","handleCopyShareLink","handleCopyAppLink","shareUrl","code","option","Fragment"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,13,14,15,16,17,18,19]}