import{R as l,m as Se,r as I,a as Ne,i as ye,u as Pe,L as we,b as Te,c as Ce,o as ke,d as Ee,e as _e,f as Ie,g as Le,h as Oe,j as ce,k as t}from"./index-DQL8d0iQ.js";const Re=e=>n=>{try{return l.Children.only(e)}catch{throw new Error(Se(n))}},Ue=(e,n)=>(e||(e=n),typeof e=="string"&&(e=l.createElement("button",null,e)),e),Be=e=>(...n)=>{if(e&&typeof e=="function")return e(...n)},q=e=>{const n=Array(e.length).fill(null),[a,s]=I.useState(n);return e.map((r,o)=>({id:r.id,mount:c=>s(d=>d.map((h,b)=>b===o?c:h)),unmount:()=>s(c=>c.map((d,h)=>h===o?null:d)),portal:()=>l.createElement(l.Fragment,null,a[o]?Ne.createPortal(r.component,a[o]):null)}))};var k=e=>{ye()&&console.error(e)};const g=(e,n)=>{n=n||e.displayName||e.name||"Component",e.displayName=n;const a=s=>{const r=Pe();return r.loaded?l.createElement(we,null,l.createElement(e,{...s,clerk:r})):null};return a.displayName=`withClerk(${n})`,a},O=e=>"mount"in e,te=e=>"open"in e;class P extends l.PureComponent{constructor(){super(...arguments),this.portalRef=l.createRef()}componentDidUpdate(n){var a,s,r,o;!O(n)||!O(this.props)||(n.props.appearance!==this.props.props.appearance||((s=(a=n.props)==null?void 0:a.customPages)==null?void 0:s.length)!==((o=(r=this.props.props)==null?void 0:r.customPages)==null?void 0:o.length))&&this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&(O(this.props)&&this.props.mount(this.portalRef.current,this.props.props),te(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.portalRef.current&&(O(this.props)&&this.props.unmount(this.portalRef.current),te(this.props)&&this.props.close())}render(){var n,a;return l.createElement(l.Fragment,null,l.createElement("div",{ref:this.portalRef}),O(this.props)&&((a=(n=this.props)==null?void 0:n.customPagesPortals)==null?void 0:a.map((s,r)=>I.createElement(s,{key:r}))))}}g(({clerk:e,...n})=>l.createElement(P,{mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:n}),"SignIn");g(({clerk:e,...n})=>l.createElement(P,{mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:n}),"SignUp");function Z({children:e}){return k(Te),l.createElement(l.Fragment,null,e)}function J({children:e}){return k(Ce),l.createElement(l.Fragment,null,e)}const $e=g(({clerk:e,...n})=>{const{customPages:a,customPagesPortals:s}=de(n.children);return l.createElement(P,{mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...n,customPages:a},customPagesPortals:s})},"UserProfile");Object.assign($e,{Page:Z,Link:J});const Ae=g(({clerk:e,...n})=>{const{customPages:a,customPagesPortals:s}=de(n.children),r=Object.assign(n.userProfileProps||{},{customPages:a});return l.createElement(P,{mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...n,userProfileProps:r},customPagesPortals:s})},"UserButton"),Ge=Object.assign(Ae,{UserProfilePage:Z,UserProfileLink:J});function X({children:e}){return k(Ee),l.createElement(l.Fragment,null,e)}function ee({children:e}){return k(ke),l.createElement(l.Fragment,null,e)}const ze=g(({clerk:e,...n})=>{const{customPages:a,customPagesPortals:s}=ue(n.children);return l.createElement(P,{mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...n,customPages:a},customPagesPortals:s})},"OrganizationProfile");Object.assign(ze,{Page:X,Link:ee});g(({clerk:e,...n})=>l.createElement(P,{mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:n}),"CreateOrganization");const Fe=g(({clerk:e,...n})=>{const{customPages:a,customPagesPortals:s}=ue(n.children),r=Object.assign(n.organizationProfileProps||{},{customPages:a});return l.createElement(P,{mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...n,organizationProfileProps:r},customPagesPortals:s})},"OrganizationSwitcher");Object.assign(Fe,{OrganizationProfilePage:X,OrganizationProfileLink:ee});g(({clerk:e,...n})=>l.createElement(P,{mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:n}),"OrganizationList");g(({clerk:e,...n})=>l.createElement(P,{open:e.openGoogleOneTap,close:e.closeGoogleOneTap,props:n}),"GoogleOneTap");const B=(e,n)=>!!e&&l.isValidElement(e)&&(e==null?void 0:e.type)===n,de=e=>me({children:e,reorderItemsLabels:["account","security"],LinkComponent:J,PageComponent:Z,componentName:"UserProfile"}),ue=e=>me({children:e,reorderItemsLabels:["members","settings"],LinkComponent:ee,PageComponent:X,componentName:"OrganizationProfile"}),me=({children:e,LinkComponent:n,PageComponent:a,reorderItemsLabels:s,componentName:r})=>{const o=[];l.Children.forEach(e,u=>{if(!B(u,a)&&!B(u,n)){u&&k(_e(r));return}const{props:x}=u,{children:v,label:y,url:w,labelIcon:S}=x;if(B(u,a))if(ne(x,s))o.push({label:y});else if(K(x))o.push({label:y,labelIcon:S,children:v,url:w});else{k(Ie(r));return}if(B(u,n))if(Q(x))o.push({label:y,labelIcon:S,url:w});else{k(Le(r));return}});const c=[],d=[],h=[];o.forEach((u,x)=>{if(K(u)){c.push({component:u.children,id:x}),d.push({component:u.labelIcon,id:x});return}Q(u)&&h.push({component:u.labelIcon,id:x})});const b=q(c),N=q(d),T=q(h),j=[],m=[];return o.forEach((u,x)=>{if(ne(u,s)){j.push({label:u.label});return}if(K(u)){const{portal:v,mount:y,unmount:w}=b.find(E=>E.id===x),{portal:S,mount:H,unmount:Y}=N.find(E=>E.id===x);j.push({label:u.label,url:u.url,mount:y,unmount:w,mountIcon:H,unmountIcon:Y}),m.push(v),m.push(S);return}if(Q(u)){const{portal:v,mount:y,unmount:w}=T.find(S=>S.id===x);j.push({label:u.label,url:u.url,mountIcon:y,unmountIcon:w}),m.push(v);return}}),{customPages:j,customPagesPortals:m}},ne=(e,n)=>{const{children:a,label:s,url:r,labelIcon:o}=e;return!a&&!r&&!o&&n.some(c=>c===s)},K=e=>{const{children:n,label:a,url:s,labelIcon:r}=e;return!!n&&!!s&&!!r&&!!a},Q=e=>{const{children:n,label:a,url:s,labelIcon:r}=e;return!n&&!!s&&!!r&&!!a};function Me(){const e=Oe();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const He=({children:e})=>{const{userId:n}=ce();return n?l.createElement(l.Fragment,null,e):null},Ye=({children:e})=>{const{userId:n}=ce();return n===null?l.createElement(l.Fragment,null,e):null};g(({clerk:e,...n})=>{const{client:a,session:s}=e,{__unstable__environment:r}=e,o=a.activeSessions&&a.activeSessions.length>0;return l.useEffect(()=>{if(s===null&&o&&r){const{afterSignOutOneUrl:c}=r.displayConfig;e.navigate(c)}else e.redirectToSignIn(n)},[]),null},"RedirectToSignIn");g(({clerk:e,...n})=>(l.useEffect(()=>{e.redirectToSignUp(n)},[]),null),"RedirectToSignUp");g(({clerk:e})=>(l.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");g(({clerk:e})=>(l.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");g(({clerk:e})=>(l.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");g(({clerk:e,...n})=>(l.useEffect(()=>{e.handleRedirectCallback(n)},[]),null),"AuthenticateWithRedirectCallback");const De=g(({clerk:e,children:n,...a})=>{const{afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o,mode:c,...d}=a;n=Ue(n,"Sign in");const h=Re(n)("SignInButton"),b=()=>{const j={afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o};return c==="modal"?e.openSignIn(j):e.redirectToSignIn(j)},T={...d,onClick:async j=>(await Be(h.props.onClick)(j),b())};return l.cloneElement(h,T)},"SignInButton"),qe=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"],C={AB:{kind:"GST_ONLY",gst:.05},BC:{kind:"GST_PST",gst:.05,pst:.07},MB:{kind:"GST_PST",gst:.05,pst:.07},NB:{kind:"HST",gst:.05,hst:.15},NL:{kind:"HST",gst:.05,hst:.15},NS:{kind:"HST",gst:.05,hst:.15},NT:{kind:"GST_ONLY",gst:.05},NU:{kind:"GST_ONLY",gst:.05},ON:{kind:"HST",gst:.05,hst:.13},PE:{kind:"HST",gst:.05,hst:.15},QC:{kind:"GST_QST",gst:.05,qst:.09975},SK:{kind:"GST_PST",gst:.05,pst:.06},YT:{kind:"GST_ONLY",gst:.05}},pe=["Standard","Exempt","Zero-rated (basic groceries)","Prepared food / restaurant","Children's clothing & footwear","Children's diapers","Children's car seats & booster seats","Feminine hygiene products","Prescription drugs / medical","Printed books (qualifying)","Newspapers (qualifying)","Public transit fares","Snack foods / candy","Sweetened carbonated beverages","Cannabis (medical)","Cannabis (non-medical)","Tobacco / alcohol","GST only","Provincial only"],Ke="BC";function Qe(e){switch(e){case"HST":return"HST";case"GST_QST":return"QST";case"GST_PST":return"PST";default:return"Provincial"}}function We(e){const n=C[e];return n.kind==="HST"?n.hst??0:n.kind==="GST_PST"?n.pst??0:n.kind==="GST_QST"?n.qst??0:0}function Ve(e){switch(e){case"Exempt":case"Zero-rated (basic groceries)":case"Feminine hygiene products":case"Public transit fares":case"Prescription drugs / medical":return{federal:!1,provincial:!1};case"Printed books (qualifying)":case"Newspapers (qualifying)":return{federal:!0,provincial:!0};case"GST only":return{federal:!0,provincial:!1};case"Provincial only":return{federal:!1,provincial:!0};default:return{federal:!0,provincial:!0}}}function Ze(e,n,a,s){let{federal:r,provincial:o}=s;switch(a){case"Children's clothing & footwear":{["ON","NS","PE"].includes(n)&&(o=!1),n==="BC"&&(o=!1),n==="MB"&&(o=!(e<=150));break}case"Children's diapers":{["ON","NS"].includes(n)&&(o=!1),["BC","MB","SK","QC"].includes(n)&&(o=!1);break}case"Children's car seats & booster seats":{["ON","BC","MB"].includes(n)&&(o=!1);break}case"Prepared food / restaurant":{n==="ON"&&e<=4&&(o=!1),n==="BC"&&(o=!1),["MB","SK"].includes(n)&&(o=!0);break}case"Sweetened carbonated beverages":{["BC","MB","SK"].includes(n)&&(o=!0);break}case"Snack foods / candy":{n==="BC"&&(o=!1),["MB","SK"].includes(n)&&(o=!0);break}case"Printed books (qualifying)":{["ON","NS","NB","NL","PE"].includes(n)&&(o=!1),["BC","MB","SK","QC"].includes(n)&&(o=!1);break}case"Newspapers (qualifying)":{["ON","BC"].includes(n)&&(o=!1);break}}return{federal:r,provincial:o}}function Je(e,n){const a=Number.isFinite(e.amount)?Math.max(e.amount,0):0,s=Ve(e.category),{federal:r,provincial:o}=Ze(a,n,e.category,s),c=C[n];let d=0,h=0,b=0;c.kind==="HST"?r&&o?b=a*(c.hst??0):r&&!o?d=a*c.gst:!r&&o&&(h=a*((c.hst??0)-c.gst)):c.kind==="GST_PST"?(r&&(d=a*c.gst),o&&(h=a*(c.pst??0))):c.kind==="GST_QST"?(r&&(d=a*c.gst),o&&(h=a*(c.qst??0))):r&&(d=a*c.gst);const N=d+h+b;return{amount:a,federalTax:d,provincialTax:h,hstTax:b,totalTax:N,grandTotal:a+N}}function Xe(e){return e.reduce((n,a)=>({subTotal:n.subTotal+a.amount,federal:n.federal+a.federalTax,provincial:n.provincial+a.provincialTax,hst:n.hst+a.hstTax,tax:n.tax+a.totalTax,grandTotal:n.grandTotal+a.grandTotal}),{subTotal:0,federal:0,provincial:0,hst:0,tax:0,grandTotal:0})}function et(e,n){const a=e.map(s=>Je(s,n));return{lines:a,totals:Xe(a)}}function he(e){return pe.includes(e)?e:"Standard"}const V="state";function tt(e){return typeof btoa=="function"?btoa(e):e}function nt(e){return typeof atob=="function"?atob(e):e}function at(e){const n=JSON.stringify(e),a=encodeURIComponent(tt(n));return`${V}=${a}`}function rt(e){if(!e.startsWith(`${V}=`))return null;const n=e.slice(V.length+1);try{const a=nt(decodeURIComponent(n)),s=JSON.parse(a);if(!s||typeof s!="object")return null;const r=s.province,o=Array.isArray(s.items)?s.items:[];if(!r)return null;const c=o.map((d,h)=>({label:typeof(d==null?void 0:d.label)=="string"&&d.label.trim()?d.label:`Item ${h+1}`,category:he(d==null?void 0:d.category),amount:typeof(d==null?void 0:d.amount)=="string"||typeof(d==null?void 0:d.amount)=="number"?String(d.amount):"0"}));return{province:r,items:c}}catch(a){return console.warn("Failed to decode share state",a),null}}function st(e){if(!e)return null;const a=e.replace(/^#/,"").split("&");for(const s of a){const r=rt(s);if(r)return r}return null}const fe="tax-smart-theme";function F(){return typeof window<"u"&&typeof document<"u"}function ae(){if(!F())return null;const e=window.localStorage.getItem(fe);return e==="light"||e==="dark"?e:null}function re(e){if(!F())return;const n=document.documentElement;n.classList.toggle("dark",e==="dark"),n.setAttribute("data-theme",e),n.style.setProperty("color-scheme",e)}function ot(e="dark"){const[n,a]=l.useState(()=>{const r=ae()??e;return re(r),r});l.useEffect(()=>{re(n),F()&&window.localStorage.setItem(fe,n)},[n]),l.useEffect(()=>{if(!F())return;const r=window.matchMedia("(prefers-color-scheme: dark)"),o=c=>{a(d=>ae()??(c.matches?"dark":"light"))};return r.addEventListener("change",o),()=>r.removeEventListener("change",o)},[]);const s=l.useCallback(()=>{a(r=>r==="dark"?"light":"dark")},[]);return{theme:n,setTheme:a,toggleTheme:s}}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),M=(e,n)=>{const a=I.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:d="",children:h,...b},N)=>I.createElement("svg",{ref:N,...lt,width:r,height:r,stroke:s,strokeWidth:c?Number(o)*24/Number(r):o,className:["lucide",`lucide-${it(e)}`,d].join(" "),...b},[...n.map(([T,j])=>I.createElement(T,j)),...Array.isArray(h)?h:[h]]));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=M("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var xe="https://js.stripe.com/v3",dt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var ut=function(){for(var n=document.querySelectorAll('script[src^="'.concat(xe,'"]')),a=0;a<n.length;a++){var s=n[a];if(dt.test(s.src))return s}return null},se=function(n){var a="",s=document.createElement("script");s.src="".concat(xe).concat(a);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},mt=function(n,a){!n||!n._registerWrapper||n._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:a})},R=null,A=null,G=null,pt=function(n){return function(){n(new Error("Failed to load Stripe.js"))}},ht=function(n,a){return function(){window.Stripe?n(window.Stripe):a(new Error("Stripe.js not available"))}},ft=function(n){return R!==null?R:(R=new Promise(function(a,s){if(typeof window>"u"||typeof document>"u"){a(null);return}if(window.Stripe){a(window.Stripe);return}try{var r=ut();if(!(r&&n)){if(!r)r=se(n);else if(r&&G!==null&&A!==null){var o;r.removeEventListener("load",G),r.removeEventListener("error",A),(o=r.parentNode)===null||o===void 0||o.removeChild(r),r=se(n)}}G=ht(a,s),A=pt(s),r.addEventListener("load",G),r.addEventListener("error",A)}catch(c){s(c);return}}),R.catch(function(a){return R=null,Promise.reject(a)}))},gt=function(n,a,s){if(n===null)return null;var r=n.apply(void 0,a);return mt(r,s),r},U,be=!1,je=function(){return U||(U=ft(null).catch(function(n){return U=null,Promise.reject(n)}),U)};Promise.resolve().then(function(){return je()}).catch(function(e){be||console.warn(e)});var xt=function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];be=!0;var r=Date.now();return je().then(function(o){return gt(o,a,r)})},oe={};const le=xt("pk_live_51RycmaC8Z2peWf8UJKHZEg6hCF2oWKv8znUzAgl2UdxLkTuHkkueL54BRkGg5qMmBg5gvp5DainqdI0fArJqkRsF0or1kridjs"),ie={PRO_MONTHLY:oe.VITE_STRIPE_MONTHLY_PRICE_ID||"price_your_monthly_price_id_here",PRO_YEARLY:oe.VITE_STRIPE_YEARLY_PRICE_ID||"price_your_yearly_price_id_here"};async function bt(e,n,a){if(!le){console.error("Stripe failed to initialize");return}try{const r=await(await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:e,userId:n,email:a,successUrl:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/pricing`})})).json();if(r.error){console.error("Error creating checkout session:",r.error);return}const o=await le;if(o){const{error:c}=await o.redirectToCheckout({sessionId:r.id});c&&console.error("Error redirecting to checkout:",c)}else console.error("Stripe failed to initialize")}catch(s){console.error("Error:",s)}}function jt({isOpen:e,onClose:n}){const{user:a}=Me(),[s,r]=I.useState(!1);if(!e)return null;const o=async c=>{var d;if(a){r(!0);try{bt(c,a.id,((d=a.primaryEmailAddress)==null?void 0:d.emailAddress)||"")}finally{r(!1)}}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upgrade to Pro"}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(ct,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Free"}),t.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$0",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})]}),t.jsxs("ul",{className:"space-y-3 mb-6",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Up to 5 line items"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Single province calculations"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Public share links (24h)"})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4 text-green-500"}),t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"All tax categories"})]})]}),t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Plan"})})]}),t.jsxs("div",{className:"border-2 border-amber-500 rounded-lg p-6 relative",children:[t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:t.jsx("span",{className:"bg-amber-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center justify-center gap-2",children:[t.jsx(ge,{className:"h-5 w-5 text-amber-500"}),"Pro"]}),t.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$9",t.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"or $90/year (save 17%)"})]}),t.jsxs("ul",{className:"space-y-3 mb-6",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Unlimited"})," line items"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Multi-province"})," comparison"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"CSV & PDF"})," export"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Private"})," share links"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Saved"})," calculations"]})]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4 text-amber-500"}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.jsx("strong",{children:"Priority"})," support"]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>o(ie.PRO_MONTHLY),disabled:s,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:s?"Loading...":"Upgrade Monthly"}),t.jsx("button",{onClick:()=>o(ie.PRO_YEARLY),disabled:s,className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:s?"Loading...":"Upgrade Yearly (Save 17%)"})]})]})]}),t.jsx("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400",children:t.jsx("p",{children:"✓ Cancel anytime • ✓ 30-day money-back guarantee • ✓ Secure checkout"})})]})})})}const vt=new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"});function z(e,n={}){return{id:crypto.randomUUID(),label:n.label??`Item ${e}`,category:n.category??"Standard",amount:n.amount??"0"}}function St(e){if(!e)return 0;const n=Number.parseFloat(e);return Number.isFinite(n)&&n>0?n:0}function f(e){return vt.format(e)}async function W(e){var n;if(typeof navigator<"u"&&((n=navigator.clipboard)!=null&&n.writeText))try{return await navigator.clipboard.writeText(e),!0}catch(a){return console.warn("Clipboard write failed",a),!1}return!1}function Nt(e){return e.map(({label:n,category:a,amount:s})=>({label:n,category:a,amount:s}))}function Pt(){const{theme:e,toggleTheme:n}=ot("dark"),[a,s]=l.useState(!1),[r,o]=l.useState(Ke),[c,d]=l.useState([z(1)]),[h,b]=l.useState(null),[N,T]=l.useState(0),j=l.useMemo(()=>c.map(i=>({amount:St(i.amount),category:i.category})),[c]),{totals:m}=l.useMemo(()=>et(j,r),[j,r]),u=Qe(C[r].kind),x=We(r),v=l.useCallback(i=>{b(i),window.setTimeout(()=>b(null),1800)},[]),y=l.useCallback(()=>{d(i=>[...i,z(i.length+1)])},[]),w=l.useCallback(i=>{d(p=>p.length>1?p.filter(L=>L.id!==i):p)},[]),S=l.useCallback((i,p)=>{d(L=>L.map(D=>D.id===i?{...D,...p}:D))},[]),H=l.useCallback(()=>{T(i=>i+1),v("Totals refreshed")},[v]),Y=l.useCallback(async()=>{const i=[`Province: ${r}`,`Subtotal: ${f(m.subTotal)}`,C[r].kind==="HST"?`HST: ${f(m.hst)}`:`GST: ${f(m.federal)}
${u}: ${f(m.provincial)}`,`Total tax: ${f(m.tax)}`,`Grand total: ${f(m.grandTotal)}`],p=await W(i.join(`
`));v(p?"Totals copied":"Clipboard not available")},[r,u,v,m]),E=l.useCallback(async()=>{const i=[`Province: ${r}`,`Subtotal: ${f(m.subTotal)}`,C[r].kind==="HST"?`HST: ${f(m.hst)}`:`GST: ${f(m.federal)}
${u}: ${f(m.provincial)}`,`Total tax: ${f(m.tax)}`,`Grand total: ${f(m.grandTotal)}`],p=await W(i.join(`
`));v(p?"Results copied to clipboard":"Clipboard not available")},[r,u,v,m]),ve=l.useCallback(async()=>{if(typeof window>"u")return;const i=new URL(window.location.href);i.hash=at({province:r,items:Nt(c)});const p=await W(i.toString());v(p?"Shareable link copied":"Clipboard not available")},[c,r,v]);return l.useEffect(()=>{if(typeof window>"u")return;const i=st(window.location.hash);i&&(o(i.province),d(i.items.length?i.items.map((p,L)=>z(L+1,{label:p.label,category:he(p.category),amount:p.amount})):[z(1)]))},[]),t.jsxs("div",{className:"calculator-shell",children:[t.jsxs("header",{className:"calculator-header",children:[t.jsxs("div",{className:"calculator-brand",children:[t.jsx("span",{className:"calculator-logo","aria-hidden":!0,children:"CA"}),t.jsxs("div",{children:[t.jsx("p",{className:"brand-name",children:"TaxSmart"}),t.jsx("p",{className:"brand-tagline",children:"GST / HST / PST & QST in one view"})]})]}),t.jsxs("div",{className:"header-actions",children:[t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:ve,children:"Share app"}),t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:E,children:"Copy results"}),t.jsx("button",{type:"button",className:"btn whitespace-nowrap",onClick:n,children:e==="dark"?"Light mode":"Dark mode"}),t.jsxs("button",{onClick:()=>s(!0),className:"btn whitespace-nowrap bg-gradient-to-r from-amber-400 to-amber-500 text-white border-transparent hover:from-amber-500 hover:to-amber-600 shadow-md hover:shadow-lg transition-all duration-200 transform hover:-translate-y-0.5",children:[t.jsx(ge,{className:"h-3.5 w-3.5 inline-block mr-1.5"}),t.jsx("span",{children:"Upgrade"})]}),t.jsx(Ye,{children:t.jsx(De,{mode:"modal",children:t.jsx("button",{className:"btn whitespace-nowrap bg-indigo-600 text-white hover:bg-indigo-700 border-transparent",children:"Sign in"})})}),t.jsx(He,{children:t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Ge,{afterSignOutUrl:"/"})})})]})]}),t.jsx(jt,{isOpen:a,onClose:()=>s(!1)}),h&&t.jsx("div",{role:"status",className:"calculator-notice",children:h}),t.jsxs("main",{className:"calculator-main grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("section",{className:"panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsx("h1",{className:"panel-title",children:"Canada sales-tax smart calculator"}),t.jsx("span",{className:"badge",children:"Free forever"})]}),t.jsx("p",{className:"panel-subtitle",children:"Estimate combined GST, HST, PST, and QST with per-province category rules."}),t.jsxs("div",{className:"province-grid",children:[t.jsxs("article",{className:"total-card form-field-card","aria-labelledby":"province-select-label",children:[t.jsx("label",{id:"province-select-label",className:"field-label",htmlFor:"province-select",children:"Province / Territory"}),t.jsx("select",{id:"province-select",className:"input select",value:r,onChange:i=>o(i.target.value),children:qe.map(i=>t.jsx("option",{value:i,children:i},i))})]}),t.jsxs("div",{className:"rate-cards",children:[t.jsxs("div",{className:"rate-card",children:[t.jsx("p",{className:"muted",children:"Federal (GST)"}),t.jsxs("p",{className:"rate-value",children:[(C[r].gst*100).toFixed(1),"%"]})]}),t.jsxs("div",{className:"rate-card",children:[t.jsxs("p",{className:"muted",children:["Provincial (",u,")"]}),t.jsx("p",{className:"rate-value",children:x?`${(x*100).toFixed(2)}%`:"—"})]})]})]})]}),t.jsxs("section",{className:"panel",children:[t.jsx("div",{className:"panel-header",children:t.jsx("h2",{className:"panel-title",children:"Line items"})}),t.jsx("div",{className:"line-items",children:c.map(i=>t.jsxs("div",{className:"line-item",children:[t.jsx("label",{className:"sr-only",htmlFor:`label-${i.id}`,children:"Item label"}),t.jsx("input",{id:`label-${i.id}`,className:"input",value:i.label,onChange:p=>S(i.id,{label:p.target.value}),placeholder:"Item label"}),t.jsx("label",{className:"sr-only",htmlFor:`category-${i.id}`,children:"Item category"}),t.jsx("select",{id:`category-${i.id}`,className:"input",value:i.category,onChange:p=>S(i.id,{category:p.target.value}),children:pe.map(p=>t.jsx("option",{value:p,children:p},p))}),t.jsx("label",{className:"sr-only",htmlFor:`amount-${i.id}`,children:"Item amount"}),t.jsxs("div",{className:"amount-field",children:[t.jsx("span",{"aria-hidden":!0,children:"$"}),t.jsx("input",{id:`amount-${i.id}`,className:"input",value:i.amount,onChange:p=>S(i.id,{amount:p.target.value}),inputMode:"decimal",type:"number",step:"0.01",min:"0",placeholder:"0.00"})]}),t.jsx("button",{type:"button",className:"btn icon","aria-label":"Remove line item",onClick:()=>w(i.id),disabled:c.length===1,children:"×"})]},i.id))}),t.jsx("div",{className:"line-items-actions",children:t.jsx("button",{type:"button",className:"btn ghost",onClick:y,children:"+ Add item"})})]}),t.jsx("div",{className:"panel actions",children:t.jsx("button",{type:"button",className:"btn primary",onClick:H,children:"Calculate tax"})}),t.jsxs("section",{className:"panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsx("h2",{className:"panel-title",children:"Totals"}),t.jsxs("div",{className:"header-actions",children:[t.jsx("button",{type:"button",className:"btn",onClick:Y,children:"Copy totals"}),t.jsx("button",{type:"button",className:"btn",onClick:E,children:"Share link"})]})]}),t.jsxs("div",{className:"totals-grid",children:[t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"Subtotal"}),t.jsx("p",{className:"total-value",children:f(m.subTotal)})]}),C[r].kind==="HST"?t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"HST"}),t.jsx("p",{className:"total-value",children:f(m.hst)})]}):t.jsxs(t.Fragment,{children:[t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"GST"}),t.jsx("p",{className:"total-value",children:f(m.federal)})]}),t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:u}),t.jsx("p",{className:"total-value",children:f(m.provincial)})]})]}),t.jsxs("article",{className:"total-card",children:[t.jsx("p",{className:"muted",children:"Total tax"}),t.jsx("p",{className:"total-value",children:f(m.tax)})]}),t.jsxs("article",{className:"total-card highlight",children:[t.jsx("p",{className:"muted",children:"Grand total"}),t.jsx("p",{className:"total-value",children:f(m.grandTotal)})]})]})]},N),t.jsxs("section",{className:"panel",children:[t.jsx("h2",{className:"panel-title",children:"References"}),t.jsxs("ul",{className:"reference-list",children:[t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/gst-hst-businesses/charge-collect-type-supply.html",target:"_blank",rel:"noreferrer",children:"CRA: Charge & collect GST/HST by type of supply"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-063.html",target:"_blank",rel:"noreferrer",children:"CRA GI-063: Ontario point-of-sale rebates (children's goods, books, diapers, car seats)"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/gi-060.html",target:"_blank",rel:"noreferrer",children:"CRA GI-060: Ontario point-of-sale rebate on newspapers"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst",target:"_blank",rel:"noreferrer",children:"BC PST overview & exemptions"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www2.gov.bc.ca/gov/content/taxes/sales-taxes/pst/ice-cream-sweetened-beverages",target:"_blank",rel:"noreferrer",children:"BC PST: Sweetened carbonated beverages"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.gov.mb.ca/finance/taxation/taxes/retail.html",target:"_blank",rel:"noreferrer",children:"Manitoba RST exemptions (incl. children's clothing)"})}),t.jsx("li",{children:t.jsx("a",{href:"https://www.revenuquebec.ca/en/",target:"_blank",rel:"noreferrer",children:"Revenu Québec: QST exemptions (books, baby products)"})})]}),t.jsx("p",{className:"muted",children:"Excise duties or deposits on alcohol, tobacco, cannabis, and containers are not included."})]})]}),t.jsx("footer",{className:"calculator-footer",children:"Built for Canadians. Totally free. No ads."})]})}export{Pt as default};
//# sourceMappingURL=TaxSmartCalculator-eKBU6V8k.js.map
